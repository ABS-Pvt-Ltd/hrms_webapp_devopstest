import{o as j,y as L,r as i,z as V,b as p,d as n,e as l,f as t,m as d,k as c,g as f,j as T,i as r,p as E,h as x,t as k}from"./app-e1ab7da0.js";import{U as $}from"./EmployeeDocumentsManagerService-956329bf.js";import"./Service-a2d19084.js";import"./ProfilePagesStore-f89c5adf.js";const M={class:"p-3 card"},O=t("h2",{class:"mx-3 my-4 text-2xl font-semibold"},"Employee Documents",-1),A={class:"w-full"},z={key:0},H=t("p",{class:"font-semibold text-red-600 fs-5"},"Pending",-1),I=[H],K={key:1},W=t("p",{class:"font-semibold text-red-600 fs-5"},"Approved",-1),q=[W],G={key:2},J=t("p",{class:"font-semibold text-red-600 fs-5"},"Rejected",-1),Q=[J],X={key:3},Y=t("p",{class:"font-semibold text-green-600"},"-",-1),Z=[Y],ee={key:0},te={key:0},oe=["onClick"],ae=t("label",{for:"file",class:"cursor-pointer"},[t("i",{class:"pi pi-upload"}),x(" Upload file")],-1),se=[ae],ne={key:0,class:""},le={key:1},ie={key:1},de=["onClick"],ce=t("label",{for:"file",class:"cursor-pointer"},[t("i",{class:"pi pi-upload"}),x(" Upload file")],-1),re=[ce],ue={key:0,class:""},me=["disabled"],_e={class:"w-full h-full d-flex justify-content-center"},pe=["src"],fe=t("h5",{style:{"text-align":"center"}},"Please wait...",-1),we={__name:"EmployeeDocumentsManager",setup(he){j(()=>{a.fetch_EmployeeDocument(),console.log(" ",P.value)});const a=$();L();const h=i(!1),P=i({}),w=i();i();const v=i(),g=V({name:""}),u=i(),b=new FormData,y=i(),B=s=>{h.value=!0,a.loading=!0,E.post("/view-profile-private-file",{user_code:a.getEmployeeDetails.current_user_code,document_name:s.document_name}).then(e=>{w.value=e.data.data,console.log("data sent",w.value)}).finally(()=>{a.loading=!1})},D=s=>{u.value=s},C=s=>{if(console.log(u),s.target.files&&s.target.files[0]){v.value=s.target.files[0],b.append(`${u.value}`,v.value),g.name=v.value,console.log(b),g.name=v.value,console.log("testing name",u.value);let e=Object.keys(b)[0];console.log("testing",e),console.log()}};async function F(){if(y.value=="Failure")Swal.fire({title:y.value="Failure",text:"Please upload all mandatory documents",icon:"error",showCancelButton:!1}).then(s=>{});else{a.loading=!0;let s="/vmt-documents-route/";E.post(s,b).then(e=>{y.value=e.data.status,console.log(y.value),console.log("Photo not send"),e.data.status=="Success"?Swal.fire({title:e.data.status="Success",text:e.data.message,icon:"success",showCancelButton:!1}).then(_=>{window.location.href="/Information"}):e.data.status=="Failure"&&Swal.fire({title:e.data.status="Failure",text:e.data.message,icon:"error",showCancelButton:!1}).then(_=>{window.location.reload()})}).finally(()=>{a.fetch_EmployeeDocument(),a.loading=!1})}}return(s,e)=>{const _=p("Column"),N=p("Button"),R=p("DataTable"),S=p("Dialog"),U=p("ProgressSpinner");return n(),l("div",M,[O,t("div",A,[d(R,{ref:"dt",value:f(a).getEmployeeDoc,dataKey:"id",paginator:!0,rows:10,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll"},{default:c(()=>[d(_,{header:"File Name",field:"document_name",style:{"min-width":"8rem"}},{default:c(()=>[x(k(f(a).getEmployeeDoc.document_name),1)]),_:1}),d(_,{field:"status",header:"status",style:{"min-width":"12rem"}},{body:c(o=>[o.data.status==="Pending"?(n(),l("div",z,I)):r("",!0),o.data.status==="Approved"?(n(),l("div",K,q)):r("",!0),o.data.status==="Rejected"?(n(),l("div",G,Q)):r("",!0),o.data.status===null?(n(),l("div",X,Z)):r("",!0)]),_:1}),d(_,{field:"",header:"View ",style:{"min-width":"12rem"}},{body:c(o=>[o.data.doc_id?(n(),l("div",ee,[o.data.status=="Rejected"?(n(),l("div",te,[t("input",{type:"file",name:"",id:"file",hidden:"",onChange:e[0]||(e[0]=m=>C(m))},null,32),t("button",{class:"btn btn-success",onClick:m=>D(o.data.document_name)},se,8,oe),o.data.document_name==u.value?(n(),l("p",ne,k(g.name.name),1)):r("",!0)])):(n(),l("div",le,[d(N,{type:"button",icon:"pi pi-eye",class:"p-button-success Button",label:"View",onClick:m=>B(o.data),style:{height:"2em"}},null,8,["onClick"])]))])):(n(),l("div",ie,[t("input",{type:"file",name:"",id:"file",hidden:"",onChange:e[1]||(e[1]=m=>C(m))},null,32),t("button",{class:"btn btn-success",onClick:m=>D(o.data.document_name)},re,8,de),o.data.document_name==u.value?(n(),l("p",ue,k(g.name.name),1)):r("",!0)]))]),_:1})]),_:1},8,["value"]),t("button",{severity:"warn",type:"submit",data:"row-6",next:"row-6",name:"submit_form",id:"msform",class:"mt-5 mr-5 text-center btn btn-orange processOnboardForm float-end text-light",value:"Submit",disabled:s.fileUploadValidation,onClick:F}," Submit ",8,me),f(a).loading==!1?(n(),T(S,{key:0,visible:h.value,"onUpdate:visible":e[3]||(e[3]=o=>h.value=o),modal:"",header:"Documents",class:"relative",style:{width:"40vw"}},{default:c(()=>[t("i",{onClick:e[2]||(e[2]=o=>h.value=!1),class:"cursor-pointer pi pi-times border-[3px] border-blue-200 rounded-full p-2 absolute top-3 right-4"}),t("div",_e,[t("img",{src:`data:image/png;base64,${w.value}`,class:"",alt:"File not found",style:{"object-fit":"cover","max-width":"400px",", min-height":"350px",height:"300px"}},null,8,pe)])]),_:1},8,["visible"])):r("",!0),d(S,{header:"Header",visible:f(a).loading,"onUpdate:visible":e[4]||(e[4]=o=>f(a).loading=o),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"25vw"},modal:!0,closable:!1,closeOnEscape:!1},{header:c(()=>[d(U,{style:{width:"50px",height:"50px"},strokeWidth:"8",fill:"var(--surface-ground)",animationDuration:"2s","aria-label":"Custom ProgressSpinner"})]),footer:c(()=>[fe]),_:1},8,["visible"])])])}}};export{we as default};
