import{u as Y}from"./ManangePayslipsService-100ed7a7.js";import{d as m}from"./dayjs.min-ac6c82aa.js";import{S as E}from"./Service-a2d19084.js";import{_ as A,r as g,o as B,b as _,d as o,e as i,f as a,t as p,g as t,m as n,n as u,h as f,i as y,k as c,E as L,G as N,D as C}from"./app-e1ab7da0.js";const r=x=>(L("data-v-74b93176"),x=x(),N(),x),U={class:""},$={class:"text-[28px] font-['poppins'] text-[#000]"},j=r(()=>a("p",{class:"text-[14px] text-[#000] font-['poppins']"},"Here you can release payslips for employees and download the payslips. Payslips can only be sent to active employees. Employees who are relieved will not receive Payslips.",-1)),T={class:"flex justify-between items-center my-4"},I={class:"flex justify-center items-center"},P={class:"text-[#000] borde-[1px] borde-[#000]"},O={class:"flex items-center"},R={class:"flex justify-content-end"},H={class:"p-input-icon-left"},J=r(()=>a("i",{class:"pi pi-search"},null,-1)),q={class:"flex justify-between items-center"},K={class:"flex items-center justify-start my-4"},z={class:"flex items-center"},G=r(()=>a("i",{class:"mr-2 pi pi-times"},null,-1)),W=r(()=>a("i",{class:"mr-2 pi pi-filter"},null,-1)),Q={key:0,class:""},X=r(()=>a("label",{for:" ",class:"text-[16px] text-[#000] font-['poppins'] mx-2"},"Select Month",-1)),Z={class:"flex items-center justify-center"},ee=["src"],te={class:"pl-2 font-semibold text-left fs-6"},se={class:"justify-center flex"},le={key:0,class:""},ae={key:1,class:"flex flex-col text-left"},ne=r(()=>a("h1",null,"Yes",-1)),oe={class:"justify-center flex"},ie={key:0,class:"flex flex-col text-left"},de=r(()=>a("h1",null,"Yes",-1)),pe={key:1,class:""},re={class:"justify-center flex"},ce={key:0,class:""},me={key:1,class:"flex flex-col text-left"},_e=r(()=>a("h1",null,"Yes",-1)),ue={__name:"managePayslipV2",setup(x){const M=g(),h=g(),e=Y(),D=E(),S=()=>{M.value?(e.Enable_btn=2,console.log(" testing sd",e.Enable_btn)):(e.Enable_btn=1,console.log(" testing sd",e.Enable_btn))};B(()=>{D.DepartmentDetails().then(F=>{h.value=F.data}),e.Enable_btn=1,e.getClientDetails(),e.getLocationDetails(),e.enable_select_calendar==1&&e.selectedDate?e.getFilterSource(e.selectedDate):e.selectedDate=new Date});const b=g({global:{value:null,matchMode:C.CONTAINS},Employee_name:{value:null,matchMode:C.STARTS_WITH}});return(F,l)=>{const v=_("MultiSelect"),V=_("InputText"),w=_("Calendar"),d=_("Column"),k=_("DataTable");return o(),i("div",U,[a("h1",$,"Payslips - "+p(t(m)(t(e).selectedDate).format("MMM-YYYY")),1),j,a("div",T,[a("div",I,[a("p",P," Total : "+p(t(e).manage_payslips_details?t(e).manage_payslips_details.length:0),1),n(v,{optionValue:"id",class:"!w-[180px]",modelValue:t(e).businessUnit,"onUpdate:modelValue":l[0]||(l[0]=s=>t(e).businessUnit=s),placeholder:"Business Unit",options:t(e).clientList,onChange:l[1]||(l[1]=s=>t(e).selectedFilter("Business Unit",t(e).businessUnit)),optionLabel:"client_fullname",maxSelectedLabels:3},null,8,["modelValue","options"]),n(v,{optionValue:"id",class:"w-[180px] mx-2",modelValue:t(e).departments,"onUpdate:modelValue":l[2]||(l[2]=s=>t(e).departments=s),placeholder:"Department",options:h.value,onChange:l[3]||(l[3]=s=>t(e).selectedFilter("departments",t(e).departments)),optionLabel:"name",maxSelectedLabels:3},null,8,["modelValue","options"]),n(v,{optionValue:"id",class:"w-[180px] mx-2",modelValue:t(e).selected_Location,"onUpdate:modelValue":l[4]||(l[4]=s=>t(e).selected_Location=s),placeholder:"Location",options:t(e).getlocation,onChange:l[5]||(l[5]=s=>t(e).selectedFilter("Location",t(e).selected_Location)),optionLabel:"name",maxSelectedLabels:3},null,8,["modelValue","options"])]),a("div",O,[a("div",R,[a("span",H,[J,n(V,{placeholder:"Keyword Search",modelValue:b.value.global.value,"onUpdate:modelValue":l[6]||(l[6]=s=>b.value.global.value=s)},null,8,["modelValue"])])])])]),a("div",q,[a("div",K,[a("button",{class:u(["rounded-[4px] p-2 px-4 mx-2 text-[#fff]",[t(e).selectedDetails?t(e).selectedDetails.length>0?"bg-[#0873CD]":" !bg-[#B1AFAF]":"!bg-[#B1AFAF]"]]),onClick:l[7]||(l[7]=s=>t(e).send_payslip_request(t(e).selectedDetails,1))},"Release Payslips",2),a("button",{class:u(["rounded-[4px] p-2 px-4 mx-2 text-[#fff]",[t(e).selectedDetails?t(e).selectedDetails.length>0?"bg-[#0873CD]":" !bg-[#B1AFAF]":"!bg-[#B1AFAF]"]]),onClick:l[8]||(l[8]=s=>t(e).send_payslip_request(t(e).selectedDetails,0))},"Hold Back Payslips",2),a("button",{class:u([[t(e).selectedDetails?t(e).selectedDetails.length>0?"bg-[#0873CD]":" !bg-[#B1AFAF]":"!bg-[#B1AFAF]"],"rounded-[4px] p-2 px-4 mx-2 text-[#fff]"]),onClick:l[9]||(l[9]=s=>t(e).send_payslip_Email(t(e).selectedDetails))},"Send Payslips by Email",2),a("button",{class:u([[t(e).selectedDetails?t(e).selectedDetails.length>0?"bg-[#0873CD]":" !bg-[#B1AFAF]":"!bg-[#B1AFAF]"],"rounded-[4px] p-2 px-4 mx-2 text-[#fff]"]),onClick:l[10]||(l[10]=s=>t(e).downloadPayslip(t(e).selectedDetails))},"Download",2),a("div",z,[a("button",{onClick:l[11]||(l[11]=s=>t(e).clearFilter()),class:"flex items-center text-[#000] !font-semibold !font-['poppins'] text-[12px] px-3 py-2 border-[1px] !bg-[#E6E6E6] mx-2 rounded-[4px] whitespace-nowrap"},[G,f(" Clear Filter")]),a("button",{onClick:l[12]||(l[12]=s=>t(e).getFilterSource()),class:"my-2 flex items-center text-[#000] !font-semibold !font-['poppins'] text-[12px] px-3 py-2 border-[1px] bg-[#F9BE00] mx-2 rounded-[4px]"},[W,f(" Run")])])]),t(e).enable_select_calendar!=1?(o(),i("div",Q,[X,n(w,{class:"",view:"month",dateFormat:"mm/yy",modelValue:t(e).selectedDate,"onUpdate:modelValue":l[13]||(l[13]=s=>t(e).selectedDate=s),onDateSelect:l[14]||(l[14]=s=>t(e).selectedFilter("selectedDate",t(e).selectedDate))},null,8,["modelValue"])])):y("",!0)]),n(k,{value:t(e).manage_payslips_details,paginator:"",rows:5,rowsPerPageOptions:[5,10,20,50],filters:b.value,"onUpdate:filters":l[16]||(l[16]=s=>b.value=s),dataKey:"id",globalFilterFields:["Employee_name"],selection:t(e).selectedDetails,"onUpdate:selection":l[17]||(l[17]=s=>t(e).selectedDetails=s),tableStyle:"min-width: 50rem my-4"},{default:c(()=>[n(d,{selectionMode:"multiple",headerStyle:"width: 3rem",onClick:l[15]||(l[15]=s=>S(t(e).selectedDetails))}),n(d,{class:"font-bold",field:"Employee_name",header:"Employee Name",style:{"min-width":"5rem !important","text-align":"center:  !important"}},{body:c(s=>[a("div",Z,[JSON.parse(s.data.avatar).type=="shortname"?(o(),i("p",{key:0,class:u(["p-2 font-semibold text-white rounded-full w-11 fs-6",t(D).getBackgroundColor(s.index)])},p(JSON.parse(s.data.avatar).data),3)):(o(),i("img",{key:1,class:"rounded-circle userActive-status profile-img",style:{height:"30px !important",width:"30px !important"},src:`data:image/png;base64,${JSON.parse(s.data.avatar).data}`,srcset:"",alt:""},null,8,ee)),a("p",te,p(s.data.Employee_name),1)])]),_:1}),n(d,{field:"Buisness_unit",header:"Business"}),n(d,{field:"Department_name",header:"Department"}),n(d,{field:"Location",header:"Location"}),n(d,{field:"Payroll_month",header:"Month"},{body:c(s=>[a("div",null,p(t(m)(s.data.Payroll_month).format("MMM-YYYY")),1)]),_:1}),n(d,{field:"is_payslip_released",header:"Payslip Released"},{body:c(s=>[a("div",se,[s.data.is_payslip_released==0?(o(),i("h1",le,"No")):y("",!0),s.data.is_payslip_released==1?(o(),i("div",ae,[ne,f(" on "+p(t(m)(s.data.payslip_release_date).format("DD MMM,YYYY")),1)])):y("",!0)])]),_:1}),n(d,{field:"payslip_revoked_date",header:"Payslip revoked"},{body:c(s=>[a("div",oe,[s.data.is_payslip_released==0&&s.data.payslip_revoked_date?(o(),i("div",ie,[de,f(" on "+p(t(m)(s.data.payslip_release_date).format("DD MMM,YYYY")),1)])):(o(),i("h1",pe,"No"))])]),_:1}),n(d,{field:"is_payslip_sent",header:"Email sent"},{body:c(s=>[a("div",re,[s.data.is_payslip_sent==0?(o(),i("h1",ce," No")):y("",!0),s.data.is_payslip_sent==1?(o(),i("div",me,[_e,f(" on "+p(t(m)(s.data.payslip_sent_date).format("DD MMM,YYYY")),1)])):y("",!0)])]),_:1})]),_:1},8,["value","filters","selection"])])}}},ve=A(ue,[["__scopeId","data-v-74b93176"]]);export{ve as default};
