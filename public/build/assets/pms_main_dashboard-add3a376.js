import{S as F}from"./Service-a2d19084.js";import{q as te,r as l,p as b,_ as O,o as R,b as x,d as v,e as g,m as h,E as U,G as W,f as t,t as y,g as a,h as z,F as q,l as se,n as oe,i as C,C as ae,j as ne}from"./app-e1ab7da0.js";import{d as G}from"./dayjs.min-ac6c82aa.js";import"./exceljs.min-3890d7de.js";import{u as H,a as re}from"./pmsMainStore-a8268de2.js";import{L as ie}from"./LoadingSpinner-1df67a25.js";const le="/build/assets/selfDashboard-2619d422.png",S=te("use_pms_dashboard_store",()=>{const _=H(),e=F(),d=l(),c=l(),o=l(),m=l(),s=l(),u=l(),n=l(),f=l(),L=l(),D=l(),T=l(),w=l(!0),J=l(""),B=l(),E=async(p,r)=>{w.value=!0,await b.post(`${window.location.origin}/api/pms/PerformanceRatingGraph`,{user_code:p,assignment_setting_id:_.assignment_setting_id,status:r}).then(i=>{c.value=i.data,console.log(c.value.label)}).finally(()=>{w.value=!1})},j=async(p,r)=>{w.value=!0,await b.post(`${window.location.origin}/api/pms/pmsDashboardSelfReviewsScore`,{user_code:p,assignment_setting_id:_.assignment_setting_id,status:r}).then(i=>{console.log(i.data),o.value=i.data}).finally(()=>{w.value=!1})},M=async(p,r)=>{w.value=!0,await b.post(`${window.location.origin}/api/pms/pmsDashboardReviewerScore`,{user_code:p,assignment_setting_id:_.assignment_setting_id,status:r}).then(i=>{console.log(i.data),m.value=i.data}).finally(()=>{w.value=!1})},I=async p=>{w.value=!0,await b.post(`${window.location.origin}/api/pms/pmsSelfReviewOnTime`,{user_code:p,assignment_setting_id:_.assignment_setting_id}).then(r=>{console.log(r.data),s.value=r.data}).finally(()=>{w.value=!1})},A=async p=>{w.value=!0,await b.post(`${window.location.origin}/api/pms/pmsReviewerReviewOnTime`,{user_code:p,assignment_setting_id:_.assignment_setting_id}).then(r=>{console.log(r.data),u.value=r.data}).finally(()=>{w.value=!1})},Q=async(p,r)=>{w.value=!0,await b.post(`${window.location.origin}/api/pms/pmsDashboardQuaterlyScoreCard`,{user_code:p,assignment_setting_id:_.assignment_setting_id,status:r}).then(i=>{n.value=i.data,console.log(n.value,"DashboardQuaterlyScoreCardDetails")}).finally(()=>{w.value=!1})},Y=async(p,r)=>{await b.post(`${window.location.origin}/api/pms/pmsDashboardprocess`,{user_code:p,assignment_setting_id:_.assignment_setting_id,status:r}).then(i=>{T.value=i.data})},K=(p,r)=>{console.log(p,"val"),s.value="",u.value="",c.value="",n.value="",T.value="",_.assignment_setting_id=p;let i=e.current_user_code;p&&(j(i,r),E(i,r),M(i,r),I(i),Q(i,r),A(i),Y(i,r))},X=async(p,r)=>{await b.post(`${window.location.origin}/api/pms/pmsDashboardsTendListAssingement_Period`,{user_code:p,assignment_setting_id:_.assignment_setting_id,status:r}).then(i=>{D.value=i.data,console.log(D.value,"trendListOptions ::"),i.data.map(({assignment_id:$,start_date:k,end_date:V})=>{k<G(new Date).format("YYYY-MM-DD")&&V>G(new Date).format("YYYY-MM-DD")&&(console.log($,":::"),B.value=$)})})},Z=async(p,r)=>{await b.post(`${window.location.origin}/api/pms/pmsDashboardsTendList`,{user_code:p,assignment_id:r||(N(D.value)?N(D.value)[0].assignment_id:"")}).then(i=>{L.value=i.data.data})},N=p=>{if(p){const r=p.filter(i=>{const $=new Date,k=$.getMonth()+1;$.getDate();const V=new Date(i.start_date).getMonth()+1;return new Date(i.start_date).getDay(),new Date(i.end_date).getMonth()+1,new Date(i.end_date).getDay(),k===V});return console.log(r),r}};function ee(){c.value="",D.value="",s.value="",u.value="",c.value="",n.value="",T.value=""}return{Performance_rating_details:c,Dashboard_selfReviews_score_details:o,pmsDashboardReviewerScore_details:m,pmsSelfReviewOnTime_details:s,pmsReviewerReviewOnTimeDetails:u,DashboardQuaterlyScoreCardDetails:n,pmsDashboardQuaterlyScoreCard:Q,Dashboardprocessdetails:T,getPmsTrendList:Z,getPmsTrendListOptions:X,PerformanceRatingGraph:E,pmsDashboardSelfReviewsScore:j,pmsDashboardReviewerScore:M,pmsSelfReviewOnTime:I,pmsReviewerReviewOnTime:A,Dashboardprocess:Y,loading:w,selecteddropdownyear:K,trendListSource:L,trendListOptions:D,currentlySelectedTrendListAssignmentId:f,rest_val:ee,selectedtrendList:B,activetab:J,client_id:d}});const ce=_=>(U("data-v-41a742e4"),_=_(),W(),_),de={class:"bg-white rounded-2xl p-[2rem]"},_e=ce(()=>t("h1",{class:"text-[20px] font-['poppins']"},"Performance Score Card",-1)),pe={__name:"performanceScoreCard",setup(_){const e=S(),d=l(),c=l();R(()=>{d.value=o(),c.value=m()});const o=()=>{const s=getComputedStyle(document.documentElement);return{labels:e.Performance_rating_details?e.Performance_rating_details.label:[],datasets:[{label:e.Performance_rating_details?e.Performance_rating_details.reviewer.labels_name:"",data:e.Performance_rating_details?e.Performance_rating_details.reviewer.score:"",fill:!1,borderColor:s.getPropertyValue("--pink-500"),tension:.4},{label:e.Performance_rating_details?e.Performance_rating_details.assignee.labels_name:"",data:e.Performance_rating_details?e.Performance_rating_details.assignee.score:[],fill:!1,borderColor:s.getPropertyValue("--blue-500"),tension:.4}]}},m=()=>{const s=getComputedStyle(document.documentElement),u=s.getPropertyValue("--text-color"),n=s.getPropertyValue("--text-color-secondary"),f=s.getPropertyValue("--surface-border");return{maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:u}}},scales:{x:{ticks:{color:n},grid:{color:f}},y:{ticks:{color:n},grid:{color:f}}}}};return(s,u)=>{const n=x("Chart");return v(),g("div",de,[_e,h(n,{type:"line",data:d.value,options:c.value,class:"h-30rem"},null,8,["data","options"])])}}},ue=O(pe,[["__scopeId","data-v-41a742e4"]]);const me={class:"card"},ve={__name:"assignment_period",setup(_){const e=S();R(()=>{d.value=o(),c.value=m()});const d=l(),c=l(),o=()=>{const s=getComputedStyle(document.documentElement);return{labels:e.DashboardQuaterlyScoreCardDetails?e.DashboardQuaterlyScoreCardDetails.label:"",datasets:[{label:" Self Review",backgroundColor:s.getPropertyValue("--blue-500"),borderColor:s.getPropertyValue("--blue-500"),data:e.DashboardQuaterlyScoreCardDetails?e.DashboardQuaterlyScoreCardDetails.self_review:""},{label:"Reviewer Review",backgroundColor:s.getPropertyValue("--pink-500"),borderColor:s.getPropertyValue("--pink-500"),data:e.DashboardQuaterlyScoreCardDetails?e.DashboardQuaterlyScoreCardDetails.reviewer_review:""}]}},m=()=>{const s=getComputedStyle(document.documentElement),u=s.getPropertyValue("--text-color"),n=s.getPropertyValue("--text-color-secondary"),f=s.getPropertyValue("--surface-border");return{indexAxis:"y",maintainAspectRatio:!1,aspectRatio:.8,plugins:{legend:{labels:{color:u}}},scales:{x:{ticks:{color:n,font:{weight:500}},grid:{display:!1,drawBorder:!1}},y:{ticks:{color:n},grid:{color:f,drawBorder:!1}}}}};return(s,u)=>{const n=x("Chart");return v(),g("div",me,[h(n,{type:"bar",data:d.value,options:c.value,class:"h-30rem"},null,8,["data","options"])])}}},ge=O(ve,[["__scopeId","data-v-dd4f8be7"]]);const he={class:""},fe={__name:"self_review_ontime",setup(_){const e=S();R(()=>{d.value=o(),c.value=m()});const d=l(),c=l(),o=()=>{const s=getComputedStyle(document.documentElement);return{labels:e.pmsSelfReviewOnTime_details?e.pmsSelfReviewOnTime_details.label:null,datasets:[{type:"line",label:"On Time",borderColor:s.getPropertyValue("--blue-500"),borderWidth:2,fill:!1,tension:.4,data:e.pmsSelfReviewOnTime_details?e.pmsSelfReviewOnTime_details.on_time_line:null},{type:"bar",label:"Actual Time",backgroundColor:"#609FBB",data:e.pmsSelfReviewOnTime_details?e.pmsSelfReviewOnTime_details.self_review:null,borderColor:"#609FBB",borderWidth:2,borerRadius:"4px 4px 0 0"}]}},m=()=>{const s=getComputedStyle(document.documentElement),u=s.getPropertyValue("--text-color"),n=s.getPropertyValue("--text-color-secondary"),f="#E2F6FF";return{maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:u}}},scales:{x:{ticks:{color:n},grid:{color:f}},y:{ticks:{color:n},grid:{color:f}}}}};return(s,u)=>{const n=x("Chart");return v(),g("div",he,[h(n,{type:"bar",data:d.value,options:c.value,class:"h-30rem"},null,8,["data","options"])])}}},we=O(fe,[["__scopeId","data-v-84647d03"]]);const ye={class:""},be={__name:"manager_review_ontime",setup(_){const e=S();R(()=>{d.value=o(),c.value=m()});const d=l(),c=l(),o=()=>{const s=getComputedStyle(document.documentElement);return{labels:e.pmsReviewerReviewOnTimeDetails?e.pmsReviewerReviewOnTimeDetails.label:null,datasets:[{type:"line",label:"On Time",borderColor:s.getPropertyValue("--blue-500"),borderWidth:2,fill:!1,tension:.4,data:e.pmsReviewerReviewOnTimeDetails?e.pmsReviewerReviewOnTimeDetails.on_time_line:null},{type:"bar",label:"Actual Time",backgroundColor:"#C6907F",data:e.pmsReviewerReviewOnTimeDetails?e.pmsReviewerReviewOnTimeDetails.reviewer_review:null,borderColor:"#C6907F",borderWidth:2}]}},m=()=>{const s=getComputedStyle(document.documentElement),u=s.getPropertyValue("--text-color"),n=s.getPropertyValue("--text-color-secondary"),f="#F9DFDE";return{maintainAspectRatio:!1,aspectRatio:.6,plugins:{legend:{labels:{color:u}}},scales:{x:{ticks:{color:n},grid:{color:f}},y:{ticks:{color:n},grid:{color:f}}}}};return(s,u)=>{const n=x("Chart");return v(),g("div",ye,[h(n,{type:"bar",data:d.value,options:c.value,class:"h-30rem"},null,8,["data","options"])])}}},xe=O(be,[["__scopeId","data-v-ca915078"]]);const P=_=>(U("data-v-f84c06fa"),_=_(),W(),_),Se={class:"card flex justify-center flex-row"},De={class:""},Ce={class:"my-2 flex flex-col justify-around"},Re={class:"flex flex-col justify-center items-start pl-4"},Pe={class:"flex justify-between items-center w-[100%] my-2"},$e=P(()=>t("div",{class:"w-[20px] h-[20px] bg-[#CDB9E4] rounded-full"},null,-1)),Oe={class:"flex justify-between w-[100%]"},Te=P(()=>t("span",{class:"text-black font-semibold font-['poppins'] mx-2 text-[14px]"},"Initiated",-1)),ke={class:"text-black font-semibold font-['poppins'] text-[14px]"},Ve={class:"flex justify-between items-center w-[100%]"},Fe=P(()=>t("div",{class:"w-[20px] h-[20px] bg-[#B2D1EF] rounded-full my-2"},null,-1)),Le={class:"flex justify-between w-[100%]"},Be=P(()=>t("span",{class:"text-black font-semibold font-['poppins'] mx-2 text-[14px]"},"Self-Reviews",-1)),Ee={class:"text-black font-semibold font-['poppins'] text-[14px]"},je={class:"flex justify-center items-center w-[100%]"},Me=P(()=>t("div",{class:"w-[20px] h-[20px] bg-[#EFB2B2] rounded-full my-2"},null,-1)),Ie={class:"flex justify-between items-center w-[100%]"},Ae=P(()=>t("span",{class:"text-black font-semibold font-['poppins'] mx-2 text-[14px]"},"Reviewer Reviews",-1)),Qe={class:"text-black font-semibold font-['poppins'] text-[14px]"},Ye={__name:"process",setup(_){const e=S();re(),R(()=>{d.value=o(),c.value=m()});const d=l(),c=l(null),o=()=>(getComputedStyle(document.body),{labels:e.Dashboardprocessdetails?e.Dashboardprocessdetails.labels_name:null,datasets:[{data:e.Dashboardprocessdetails?e.Dashboardprocessdetails.labels_value:null,backgroundColor:["#CDB9E4","#B2D1EF","#EFB2B2"]}]}),m=()=>({plugins:{legend:{labels:{cutout:"20%",color:getComputedStyle(document.documentElement).getPropertyValue("--text-color")}}}});return(s,u)=>{const n=x("Chart");return v(),g("div",Se,[t("div",De,[h(n,{type:"doughnut",data:d.value,options:c.value,class:"h-[20px]"},null,8,["data","options"])]),t("div",Ce,[t("div",Re,[t("div",Pe,[$e,t("div",Oe,[Te,t("span",ke,y(a(e).Dashboardprocessdetails.list.goal_initiated)+" %",1)])]),t("div",Ve,[Fe,t("div",Le,[Be,t("span",Ee,y(a(e).Dashboardprocessdetails.list.self_reviews)+" %",1)])]),t("div",je,[Me,t("div",Ie,[Ae,t("span",Qe,y(a(e).Dashboardprocessdetails.list.reviewer_reviews)+" %",1)])])])])])}}},Ne=O(Ye,[["__scopeId","data-v-f84c06fa"]]),Ge={class:"w-full bg-[#E0F4D7] card p-4 h-[280px] mt-[20px] overflow-y-auto"},Ue={class:"flex justify-between items-center"},We=t("h1",{class:"font-['poppins'] font-semibold text-[16px]"},"Trend-list",-1),ze=ae('<div class="grid grid-cols-3 gap-4 font-[&#39;poppins&#39;] my-4"><div class=""><span class="text-[#666666]">Process</span></div><div class="text-center"><span class="text-[#666666] text-center">Status</span></div><div class="text-center"><span class="text-[#666666] text-center">days</span></div></div>',1),qe={class:""},He={class:"text-[#000] text-[15px]"},Je={class:"text-center"},Ke={class:"text-[#000] text-[15px] text-center"},Xe={class:"text-center"},Ze={__name:"trentList",setup(_){const e=S(),d=F();return l(),l(),l([{name:"New York",code:"NY"},{name:"Rome",code:"RM"},{name:"London",code:"LDN"},{name:"Istanbul",code:"IST"},{name:"Paris",code:"PRS"}]),l([{process:"asd",status:"Over-Time",days:"+ 4 Days",is_overdue:1},{process:"asd",status:"Over-Time",days:"+ 4 Days",is_overdue:1},{process:"asd",status:"Over-Time",days:"+ 4 Days",is_overdue:1},{process:"asd",status:"Over-Time",days:"+ 4 Days",is_overdue:1}]),(c,o)=>{const m=x("Dropdown");return v(),g("div",Ge,[t("div",Ue,[We,z(" "+y(a(e).activetab)+" ",1),h(m,{modelValue:a(e).selectedtrendList,"onUpdate:modelValue":o[0]||(o[0]=s=>a(e).selectedtrendList=s),options:a(e).trendListOptions,onChange:o[1]||(o[1]=s=>a(e).getPmsTrendList(a(d).current_user_code,a(e).selectedtrendList)),optionValue:"assignment_id",optionLabel:"assignment_period",placeholder:"Select",class:"border-none w-[120px] bg-[#E0F4D7]"},null,8,["modelValue","options"])]),ze,a(e).trendListSource?(v(!0),g(q,{key:0},se(a(e).trendListSource,(s,u)=>(v(),g("div",{class:"my-2 grid grid-cols-3 gap-4 font-['poppins'] overflow-hidden",key:u},[t("div",qe,[t("span",He,y(s.process),1)]),t("div",Je,[t("span",Ke,y(s.status),1)]),t("div",Xe,[t("span",{class:oe(["text-[15px] text-center",[s.is_overdue!=1?"text-[#387C2D]":"text-[#B20000]"]])},y(s.days),3)])]))),128)):C("",!0)])}}};const et={key:0,class:"flex justify-center"},tt=t("img",{src:le,alt:"",class:"w-[100%]"},null,-1),st=[tt],ot={key:1,class:"w-full"},at={class:"flex justify-between items-center"},nt={class:"text-[#000] font-['poppins'] text-[24px] my-2"},rt=t("span",{class:"text-[gray] text-[24px]"}," PMS Dashboard,",-1),it={class:"grid grid-cols-4 gap-4 h-[128px] mb-[3rem]"},lt={class:"bg-[#FFEFE2] rounded-lg p-3"},ct=t("h1",{class:"font-['poppins'] text-[16px]"},"Self-Review",-1),dt={class:"mt-2"},_t={class:"text-[20px] font-['poppins'] my-2"},pt=t("div",{class:"flex justify-between my-2 font-['poppins']"},[t("span",null,"Score")],-1),ut={class:"bg-[#F6F3D4] rounded-lg p-3"},mt=t("h1",{class:"font-['poppins'] text-[16px]"},"Manager-Review",-1),vt={class:"mt-2"},gt={class:"text-[20px] font-['poppins'] my-2"},ht=t("div",{class:"flex justify-between my-2 font-['poppins']"},[t("span",null,"Score")],-1),ft={key:0,class:"!bg-[#E2F6FF] rounded-xl p-2"},wt=t("h1",{class:"font-['poppins'] text-[16px]"},"Self-Review",-1),yt={key:1,class:"bg-[#F9DFDE] rounded-xl p-2"},bt=t("h1",{class:"font-['poppins'] text-[16px]"},"Manager-Review",-1),xt={class:"grid grid-cols-12 gap-2"},St={class:"col-span-8 h-[340px]"},Dt={key:0,class:"w-full"},Ct={key:1,class:"w-full mt-2 mb-[2rem]"},Rt={class:"col-span-4"},Pt={key:0,class:"w-[100%]"},$t={key:1,class:""},Ot={class:"w-[100%]"},Tt={__name:"pms_main_dashboard",setup(_){l(40);const e=S(),d=H(),c=F();return R(async()=>{let o;await c.getCurrentUserCode().then(m=>{o=m.data,d.selectedAssigneeFormUsercode=m.data}),await d.getAssignmentPeriodDropdown(o),await e.PerformanceRatingGraph(o,"Self"),await e.pmsDashboardSelfReviewsScore(o,"Self"),await e.pmsDashboardReviewerScore(o,"Self"),await e.pmsSelfReviewOnTime(o),await e.pmsReviewerReviewOnTime(o),await e.pmsDashboardQuaterlyScoreCard(o,"Self"),await e.getPmsTrendListOptions(o,"Self"),await e.getPmsTrendList(o,null),await e.Dashboardprocess(o,"Self")}),(o,m)=>{const s=x("Dropdown"),u=x("ProgressBar"),n=x("Skeleton");return v(),g(q,null,[a(e).loading?(v(),ne(ie,{key:0,class:"absolute z-50 bg-white"})):C("",!0),t("div",null,[a(c).current_user_role==1?(v(),g("div",et,st)):(v(),g("div",ot,[t("div",at,[t("h1",nt,[rt,z(" "+y(a(c).current_user_name?a(c).current_user_name:"")+" !",1)]),h(s,{modelValue:a(d).assignment_setting_id,"onUpdate:modelValue":m[0]||(m[0]=f=>a(d).assignment_setting_id=f),options:a(d).selectedyear,onChange:m[1]||(m[1]=f=>a(e).selecteddropdownyear(a(d).assignment_setting_id,"Self")),optionValue:"assignment_id",optionLabel:"assignment_period",placeholder:"    Select  Year",class:"h-[30px] w-[220px]"},null,8,["modelValue","options"])]),t("div",it,[t("div",lt,[ct,t("div",dt,[t("span",_t,y(a(e).Dashboard_selfReviews_score_details)+"%",1),t("div",null,[h(u,{class:"progressbar_val2",value:a(e).Dashboard_selfReviews_score_details},null,8,["value"]),pt])])]),t("div",ut,[mt,t("div",vt,[t("span",gt,y(a(e).pmsDashboardReviewerScore_details)+"%",1),t("div",null,[h(u,{class:"progressbar_val2",value:a(e).pmsDashboardReviewerScore_details},null,8,["value"]),ht])])]),a(e).pmsSelfReviewOnTime_details?(v(),g("div",ft,[wt,h(we)])):C("",!0),a(e).pmsReviewerReviewOnTimeDetails?(v(),g("div",yt,[bt,h(xe)])):C("",!0)]),t("div",xt,[t("div",St,[a(e).Performance_rating_details?(v(),g("div",Dt,[h(ue)])):C("",!0),a(e).DashboardQuaterlyScoreCardDetails?(v(),g("div",Ct,[h(ge)])):C("",!0)]),t("div",Rt,[a(e).Dashboardprocessdetails?(v(),g("div",Pt,[h(Ne)])):(v(),g("div",$t,[h(n,{width:"100%",height:"240px"})])),t("div",Ot,[h(Ze)])])])]))])],64)}}},jt=Object.freeze(Object.defineProperty({__proto__:null,default:Tt},Symbol.toStringTag,{value:"Module"}));export{Ze as _,ge as a,Ne as b,Tt as c,jt as d,xe as m,ue as p,we as s,S as u};
