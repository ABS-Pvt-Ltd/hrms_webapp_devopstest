import{d as g}from"./dayjs.min-ac6c82aa.js";import{q as $,r as x,u as G,a as W,p as E,o as q,D as O,b as D,d as s,e as a,g as l,j as U,i as f,f as e,m as w,k as T,h,t as n,F as d,l as c,n as v}from"./app-e1ab7da0.js";import{U as J}from"./EmployeeDocumentsManagerService-956329bf.js";import{S as K}from"./Service-a2d19084.js";import{p as z}from"./ProfilePagesStore-f89c5adf.js";/* empty css                                                                       */const Q=$("employeePayslipStore",()=>{const H=J(),o=z(),M=x(),A=x(),P=x("");G();const _=W(),N=K(),R=x(),m=x(),k=x(),V=x(!1);new URLSearchParams(window.location.search);const t=x(!1);function i(){return console.log("route.params.id",_.params.user_id),_.params.user_id?_.params.user_id:N.current_user_id}async function r(){t.value=!0,E.post("/payroll/paycheck/getEmployeeAllPayslipList",{uid:o.getURLParams_UID(),dropdown_value:k.value}).then(y=>{M.value=y.data.data}).finally(()=>{t.value=!1})}async function I(y,b){t.value=!0,console.log(y,"user_code ::"),console.log("getURLParams_UID()",i()),P.value=b;let S=parseInt(g(b).month())+1,L=g(b).year();await E.post("/empViewPayslipdetails",{uid:o.getURLParams_UID(),user_code:y,month:S,year:L}).then(p=>{A.value=p.data,V.value=!0}).finally(()=>{t.value=!1})}function C(y,b,S,L){const p=y,u=document.createElement("a"),Y=`${b}-${S}-${L}.pdf`;u.href=p,u.download=Y,u.click()}async function F(y,b){t.value=!0,H.loading=!0,console.log("Downloading payslip PDF.....");let S=parseInt(g(b).month())+1,L=g(b).year();await E.post("/empGeneratePayslipPdfMail",{uid:o.getURLParams_UID(),user_code:y,month:S,year:L,type:"pdf"}).then(p=>{if(console.log(" Response [downloadPayslipReleaseStatus] : "+JSON.stringify(p.data.data.payslip)),p.data){let u=p.data.data.payslip,Y=p.data.data.emp_name,B=p.data.data.month,j=p.data.data.year;console.log(u),u&&(u.startsWith("JVB")?(u="data:application/pdf;base64,"+u,C(u,Y,B,j)):u.startsWith("data:application/pdf;base64")&&C(u))}else console.log("Response Url Not Found")}).finally(()=>{H.loading=!1,t.value=!1})}return{Payroll_month:P,array_employeePayslips_list:M,paySlipHTMLView:A,canShowPayslipView:V,loading:t,selected_payslip:R,selected_dropdown_details:k,salary_dropdown_details:m,getEmployeeAllPayslipList:r,getEmployeePayslipDetailsAsHTML:I,getEmployeePayslipDetailsAsPDF:F,getsalary_details_dropdown:()=>{E.get("/payslipYearwiseDropdown").then(y=>{m.value=y.data.data,console.log(m.value,"salary_dropdown_details"),y.data.data.map(({start_date:b,end_date:S,id:L,year_dropdown:p})=>{b<g(new Date).format("YYYY-MM-DD")&&S>g(new Date).format("YYYY-MM-DD")&&(console.log(L,":::"),k.value=p,console.log(k.value,"asdjka"))})}).finally(()=>{r()})}}});const X={class:"w-full"},Z={class:"flex justify-between my-2"},ee=e("div",null,null,-1),te=["onClick"],se=e("i",{class:"pi pi-eye"},null,-1),ae=[se],oe={class:"bg-[#000] text-[#fff] w-[100%] h-[60px] absolute top-0 left-0"},le=e("i",{class:"pi pi-download"},null,-1),ne=[le],ie={class:"flex justify-center w-[100%] my-3 rounded-lg"},de={class:"w-[95%] h-[90%] shadow-lg p-4"},ce={class:"w-[100%] flex justify-between"},re={class:"flex flex-col"},_e={class:"text-[25px] flex items-center"},pe={class:"text-gray-500 text-[25px]"},ue=["src"],ye={class:"mt-[30px]"},he=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),xe={class:"col-3"},me=e("p",{class:""},"Employee Code",-1),be={class:"text-[#000] text-[12px]"},fe={class:"col-3"},ve=e("p",null,"Date Joining",-1),we={class:"text-[#000]"},ge={class:"col-3"},Se=e("p",null,"Department",-1),Le={class:"text-[#000]"},Te={class:"col-3"},Pe=e("p",null,"Designation",-1),ke={class:"text-[#000]"},Me={class:"col-3"},De=e("p",null,"Payment Mode",-1),Ae={class:"text-[#000]"},Ve={class:"col-3"},Ee=e("p",null,"Bank Name",-1),He={class:"text-[#000]"},Ne={class:"col-3"},Re=e("p",null,"Bank Account",-1),Ye={class:"text-[#000]"},Oe={class:"col-3"},Ce=e("p",null,"Bank ISFC",-1),Ue={class:"text-[#000]"},Ie={class:"col-3"},Fe=e("p",null,"PAN",-1),Be={class:"text-[#000]"},je=e("div",{class:"col-3"},[e("p",null,"ESIC"),e("p",{class:"text-[#000]"},n("-"))],-1),$e={class:"col-3"},Ge=e("p",null,"UAN",-1),We={class:"text-[#000]"},qe={class:"col-3"},Je=e("p",null,"EPF Number",-1),Ke={class:"text-[#000]"},ze=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),Qe={class:""},Xe=e("h1",{class:"font-semibold text-[16px] my-[16px]"},"LEAVE DETAILS",-1),Ze=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),et={class:"py-2 mx-2 row"},tt={class:"col-3"},st=e("p",{class:"text-[#000]"},"Leave Types",-1),at={class:"col-3"},ot=e("p",{class:"text-[#000]"},"Opening Balance",-1),lt={class:"col-3"},nt=e("p",{class:"text-[#000]"},"Availed",-1),it={class:"col-3"},dt=e("p",{class:"text-[#000]"},"Closing Balance",-1),ct={class:""},rt=e("h1",{class:"font-semibold text-[16px] my-[16px]"},"SALARY DETAILS",-1),_t=e("div",{class:"border-[1.5px] border-[#000] my-[12px]"},null,-1),pt={class:"col-3"},ut=e("p",null,"ACTUAL PAYABLE DAYS",-1),yt={class:"text-[#000]"},ht={class:"col-3"},xt=e("p",null,"TOTAL WORKING DAYS",-1),mt={class:"text-[#000]"},bt={class:"col-3"},ft=e("p",null,"LOSS OF PAY DAYS",-1),vt={class:"text-[#000]"},wt={class:"col-3"},gt=e("p",null,"ARREAR DAYS PAYABLE",-1),St={class:"text-[#000]"},Lt={class:"row mt-2 py-2 border-y-[1px] border-[gray] mx-2"},Tt={class:"col-7 border-r-[1.4px] border-[gray] relative"},Pt={class:"row"},kt={class:"col-6"},Mt=e("h1",{class:"font-semibold text-[#000]"},"Earnings",-1),Dt={key:0,class:"font-semibold text-black"},At={class:"col-2 relative"},Vt={key:0,class:"font-semibold text-right text-[#000] font-['poppins']"},Et={class:"col-2"},Ht={key:0,class:"font-semibold text-right text-[#000] font-['poppins']"},Nt={class:"col-2"},Rt=e("h1",{class:"font-semibold text-right text-[#000]"},"Earned",-1),Yt={class:"col"},Ot={border:"2",class:"w-[100%]"},Ct={class:"w-[100%]"},Ut=e("h1",{class:"font-semibold text-[#000]"},"CONTRIBUTIONS",-1),It={key:0,class:"text-black font-semibold text-[14px]"},Ft=e("h1",{class:"font-semibold"}," ",-1),Bt={class:"w-[100%]"},jt=e("h1",{class:"font-semibold"},"Tax Deduction",-1),$t={key:0,class:"text-[14px] text-[#000] font-semibold"},Gt=e("h1",{class:"font-semibold"}," ",-1),Wt={class:"my-2 col-6"},qt={key:0,class:"font-semibold text-black"},Jt={class:"my-2 col-6"},Kt={class:"text-[16px] text-[#000]"},zt=e("div",null,[e("p",{class:"mt-2 font-semibold flex text-[#000]"},[h("*** Note:All "),e("span",{class:"text-[16px] text-[#000]"},"amounts displayed in this payslips are in"),h(" INR")]),e("p",{class:"mt-[50px] font-semibold text-[#000]"},"**This is computer generated statement,does not require signature.")],-1),Qt={class:""},Xt={class:"flex items-center float-right"},Zt=e("p",{class:"mx-2"},"Powered by ",-1),es=["src"],ds={__name:"EmployeePayslips",setup(H){const o=Q();x(!0),x(),q(()=>{console.log("EmployeePayslips,vue loaded"),o.getsalary_details_dropdown()});const M=x({PAYROLL_MONTH:{value:null,matchMode:O.STARTS_WITH,matchMode:O.EQUALS,matchMode:O.CONTAINS}}),A=P=>[{"!hidden":P.payslip_release_status===0}];return(P,_)=>{const N=D("LoadingSpinner"),R=D("Dropdown"),m=D("Column"),k=D("DataTable"),V=D("Sidebar");return s(),a(d,null,[l(o).loading?(s(),U(N,{key:0,class:"absolute z-50 bg-white"})):f("",!0),e("div",X,[e("div",Z,[ee,w(R,{modelValue:l(o).selected_dropdown_details,"onUpdate:modelValue":_[0]||(_[0]=t=>l(o).selected_dropdown_details=t),optionValue:"year_dropdown",onChange:_[1]||(_[1]=t=>l(o).getEmployeeAllPayslipList(l(o).selected_dropdown_details)),options:l(o).salary_dropdown_details,optionLabel:"year_dropdown",placeholder:"Select Salary Details",class:"h-10 w-14rem"},null,8,["modelValue","options"])]),w(k,{value:l(o).array_employeePayslips_list,paginator:!0,rows:10,dataKey:"id",paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],sortField:"PAYROLL_MONTH",sortOrder:-1,rowClass:A,currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} Records",responsiveLayout:"scroll",filters:M.value,"onUpdate:filters":_[2]||(_[2]=t=>M.value=t),filterDisplay:"menu",loading:P.loading2,globalFilterFields:["name"]},{empty:T(()=>[h(" Salary Details Not Found.")]),default:T(()=>[w(m,{field:"PAYROLL_MONTH",header:"Month",sortable:!0},{body:T(t=>[h(n(l(g)(t.data.PAYROLL_MONTH).format("MMM-YYYY")),1)]),_:1}),w(m,{field:"TOTAL_EARNED_GROSS",header:"Gross Pay"}),w(m,{field:"Reimbursements",header:"Reimbursements"},{body:T(t=>[h(n(0))]),_:1}),w(m,{field:"TOTAL_DEDUCTIONS",header:"Deductions"}),w(m,{field:"NET_TAKE_HOME",header:"Take Home"}),w(m,{header:"Action"},{body:T(t=>[e("button",{class:"py-2 px-3 rounded-md",onClick:i=>l(o).getEmployeePayslipDetailsAsHTML(t.data.user_code,t.data.PAYROLL_MONTH)},ae,8,te)]),_:1})]),_:1},8,["value","filters","loading"])]),l(o).canShowPayslipView?(s(),U(V,{key:1,position:"right",visible:l(o).canShowPayslipView,"onUpdate:visible":_[4]||(_[4]=t=>l(o).canShowPayslipView=t),modal:"",header:"Payslip",style:{width:"60vw !important"}},{header:T(()=>[e("div",oe,[e("button",{class:"flex items-center p-2 absolute top-5 border-[1px] mx-2 text-white rounded-md h-[33px]",onClick:_[3]||(_[3]=t=>l(o).getEmployeePayslipDetailsAsPDF("",l(o).Payroll_month))},ne)])]),default:T(()=>[e("div",ie,[e("div",de,[e("div",ce,[e("div",re,[e("h1",_e,[h("PAYSLIP "),e("span",pe,n(l(o).paySlipHTMLView.data.date_month.Month)+" "+n(l(o).paySlipHTMLView.data.date_month.Year),1)]),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.client_details,t=>(s(),a("h2",{class:"text-[16px] mt-[10px] text-[#000] font-semibold",key:t},n(t.client_fullname),1))),128)),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.client_details,t=>(s(),a("p",{class:"w-[300px] mt-[10px]",key:t},n(t.address),1))),128))]),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.client_details,t=>(s(),a("div",{key:t},[e("img",{src:`${t.client_logo}`,alt:"testing",class:"w-[200px]"},null,8,ue)]))),128))]),e("div",ye,[(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.personal_details,t=>(s(),a("h1",{class:"font-semibold text-[16px] my-[16px]",key:t}," Employee Name : "+n(t.name),1))),128)),he,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.personal_details,t=>(s(),a("div",{class:"mx-2 row border-b-[1px] border-[gray] py-2",key:t},[e("div",xe,[me,e("p",be,n(t.user_code?t.user_code:"-"),1)]),e("div",fe,[ve,e("p",we,n(t.doj?l(g)(t.doj).format("DD-MMM-YYYY"):"-"),1)]),e("div",ge,[Se,e("p",Le,n(t.department_name?t.department_name:"-"),1)]),e("div",Te,[Pe,e("p",ke,n(t.designation?t.designation:"-"),1)])]))),128)),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.personal_details,t=>(s(),a("div",{class:"mx-2 row border-b-[1px] border-[gray] py-2",key:t},[e("div",Me,[De,e("p",Ae,n(t.bank_account_number?"Bank":"cheque"),1)]),e("div",Ve,[Ee,e("p",He,n(t.bank_name?t.bank_name:"-"),1)]),e("div",Ne,[Re,e("p",Ye,n(t.bank_account_number?t.bank_account_number:"-"),1)]),e("div",Oe,[Ce,e("p",Ue,n(t.bank_ifsc_code?t.bank_ifsc_code:"-"),1)])]))),128)),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.personal_details,t=>(s(),a("div",{class:"py-2 mx-2 row",key:t},[e("div",Ie,[Fe,e("p",Be,n(t.pan_number?t.pan_number:"-"),1)]),je,e("div",$e,[Ge,e("p",We,n(t.uan_number?t.uan_number:"-"),1)]),e("div",qe,[Je,e("p",Ke,n(t.epf_number?t.epf_number:"-"),1)])]))),128)),ze]),e("div",Qe,[Xe,Ze,e("div",et,[e("div",tt,[st,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.leave_data,t=>(s(),a("p",{class:"text-[#000]",key:t},n(t.leave_type?t.leave_type:"-"),1))),128))]),e("div",at,[ot,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.leave_data,t=>(s(),a("p",{class:"text-[#000]",key:t},n(t.opening_balance?t.opening_balance:"-"),1))),128))]),e("div",lt,[nt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.leave_data,t=>(s(),a("p",{class:"text-[#000]",key:t},n(t.availed?t.availed:"-"),1))),128))]),e("div",it,[dt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.leave_data,t=>(s(),a("p",{class:"text-[#000]",key:t},n(t.closing_balance?t.closing_balance:"-"),1))),128))])])]),e("div",ct,[rt,_t,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.salary_details,t=>(s(),a("div",{class:"py-2 mx-2 row",key:t},[e("div",pt,[ut,e("p",yt,n(t.month_days?t.month_days:"-"),1)]),e("div",ht,[xt,e("p",mt,n(t.worked_Days?t.worked_Days:"-"),1)]),e("div",bt,[ft,e("p",vt,n(t.lop?t.lop:"-"),1)]),e("div",wt,[gt,e("p",St,n(t.arrears_Days?t.arrears_Days:"-"),1)])]))),128))]),e("div",Lt,[e("div",Tt,[e("div",Pt,[e("div",kt,[Mt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.earnings[0],(t,i,r)=>(s(),a("h1",{class:v(["flex items-center my-3",[i=="Total Earnings"?"text-black font-semibold":"text-black"]]),key:r},[h(n(i)+" ",1),i=="Total Earnings"?(s(),a("span",Dt,"(A)")):f("",!0)],2))),128))]),e("div",At,[l(o).paySlipHTMLView.data.compensatory_data[0]?(s(),a("h1",Vt,"Fixed")):f("",!0),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.compensatory_data[0],(t,i,r)=>(s(),a("h1",{key:r,class:v(["mt-[12px] !text-right text-[#000]",[i=="Total Earnings"?" absolute bottom-4 right-3":""]])},n(t),3))),128))]),e("div",Et,[l(o).paySlipHTMLView.data.arrears[0]!=""?(s(),a("h1",Ht,"Arrears")):f("",!0),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.arrears[0],(t,i,r)=>(s(),a("h1",{key:r,class:"mt-[12px] text-[#000]"},n(t),1))),128))]),e("div",Nt,[Rt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.earnings[0],(t,i,r)=>(s(),a("h1",{key:r,class:v(["my-3 text-right text-[#000]",[i=="Total Earnings"?"text-black text-[14px] font-semibold":""]])},n(t),3))),128))])])]),e("div",Yt,[e("table",Ot,[e("tr",Ct,[e("td",null,[Ut,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.contribution[0],(t,i,r)=>(s(),a("p",{class:v(["my-2 text-[#000] flex",[i=="Total Contribution"?"text-[14px] text-[#000] font-semibold":" text-black"]]),key:r},[h(n(i)+" ",1),i=="Total Contribution"?(s(),a("span",It," (B)")):f("",!0)],2))),128))]),e("td",null,[Ft,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.contribution[0],(t,i,r)=>(s(),a("p",{class:v(["my-2 text-[#000] text-right",[i=="Total Contribution"?"text-[13px] text-[#000] font-semibold":" text-black"]]),key:r},n(t),3))),128))])]),e("tr",Bt,[e("td",null,[jt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.Tax_Deduction[0],(t,i,r)=>(s(),a("p",{class:v(["my-2 text-[#000] flex items-center",[i=="Total Deduction"?"text-[14px] text-[#000] font-semibold":" text-black"]]),key:r},[h(n(i)+" ",1),i=="Total Deduction"?(s(),a("span",$t," (C)")):f("",!0)],2))),128))]),e("td",null,[Gt,(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.Tax_Deduction[0],(t,i,r)=>(s(),a("p",{class:v(["my-2 text-[#000] text-right",[i=="Total Deduction"?"text-[14px] text-[#000] font-semibold":" text-black"]]),key:r},n(t),3))),128))])])])])]),(s(!0),a(d,null,c(l(o).paySlipHTMLView.data.over_all[0],(t,i,r)=>(s(),a("div",{class:"my-2 row w-[100%]",key:r},[e("div",Wt,[e("p",{class:v(["text-[#000]",[i=="Net Salary Payable"||i=="Net Salary in words"?"text-black text-[14px] font-semibold":""]])},[h(n(i)+" ",1),i=="Net Salary Payable"?(s(),a("span",qt,"(A-B-C)")):f("",!0)],2)]),e("div",Jt,[e("p",Kt,[i=="Net Salary Payable"?(s(),a("span",{key:0,class:v(["text-[16px] font-semibold text-right",[i=="Net Salary Payable"?"text-black text-[14px] font-semibold":""]]),style:{"font-family":"sans-serif !important"}},"₹ ",2)):f("",!0),h(n(t),1)])])]))),128)),zt,e("div",Qt,[e("div",Xt,[Zt,e("img",{src:`${l(o).paySlipHTMLView.data.date_month.abs_logo}`,alt:"",class:"w-[140px] h-[50px]"},null,8,es)])])])])]),_:1},8,["visible"])):f("",!0)],64)}}};export{ds as _};
