import{q as M,r,p as k,o as z,b as C,d as v,e as j,g,j as P,i as F,f as o,m as s,k as a,F as I,h as _,t as m,n as Y,D as q}from"./app-e1ab7da0.js";import{m as G}from"./map-e2bf2fda.js";import{S as K}from"./Service-a2d19084.js";import{L as H}from"./LoadingSpinner-1df67a25.js";/* empty css                                                                       */const Q=M("EmpDetailApprovalsStore",()=>{const h=r(),u=r();async function i(){u.value=!0,await k.get("/fetch-proof-doc").then(p=>{console.log(p.data),h.value=p.data,console.log(h.value)}).finally(()=>{u.value=!1})}return{array_EmpDetails_list:h,canShowLoadingScreen:u,getEmpDetails_list:i}}),W={class:"w-full p-2"},X=o("h1",{class:"font-semibold text-lg mb-2"},"Employee Details ",-1),Z={class:"confirmation-content"},ee={class:"flex justify-center items-center gap-3"},te={class:"confirmation-content"},oe=o("i",{class:"mr-3 pi pi-exclamation-triangle",style:{"font-size":"2rem"}},null,-1),le={class:"flex justify-center items-center gap-3"},ae={class:"text-left"},se={class:"p-input-icon-left"},ne=o("i",{class:"pi pi-search"},null,-1),ie={class:"flex items-center !justify-center"},re=["src"],de={class:"pl-2 font-semibold fs-6 flex flex-col text-[#0873CD] text-justify"},ce={class:"text-[#535353]"},ue={class:"flex gap-4 justify-center items-center"},pe=["onClick"],me=["onClick"],fe=["onClick"],ve={class:"flex justify-center items-center gap-4"},ge=["onClick"],_e=o("i",{class:"pi pi-check"},null,-1),he=[_e],be=["onClick"],xe=o("i",{class:"pi pi-times"},null,-1),we=[xe],ye=["src","alt"],Re={__name:"EmpDetails_approvals",setup(h){const u=K(),i=Q();r([]);const p=r(),b=r(!1),x=r(!1);let n=null,f=null;const U=r(!1),w=r(!1),A=r();z(async()=>{await i.getEmpDetails_list()});const y=r({global:{value:null,matchMode:q.CONTAINS}}),V=l=>{w.value=!0,k.post(`${window.location.origin}/view/getEmpProfileProofPrivateDoc`,{emp_doc_record_id:l}).then(e=>{console.log(e.data.data),A.value=e.data.data,console.log("data sent",A.value)}).finally(()=>{})};function L(l,e){x.value=!0,n=e,f=l,console.log("Selected Bulk Row Data : "+JSON.stringify(l))}function S(){n="",f=null}function D(l){x.value=!1,l&&S()}function R(l){b.value=!1,l&&S()}const N=(l,e)=>{b.value=!0,n=e,f=l},T=()=>{i.canShowLoadingScreen=!0,R();let l=G(f,"record_id");console.log("Processing Rowdata : "+JSON.stringify(f.documents)),console.log("currentlySelectedStatus : "+n),console.log("Processed doc record ids : "+l),k.post("/approvals/EmployeeProof-bulkdocs-approve-reject",{approver_user_id:u.current_user_id,record_id:l,status:n=="Approve"?"Approved":n=="Reject"?"Rejected":n,reviewer_comments:""}).then(e=>{console.log("testing data",e.data)}).finally(()=>{i.canShowLoadingScreen=!1,i.getEmpDetails_list(),S()})};function O(){i.canShowLoadingScreen=!0,D(),k.post(`${window.location.origin}/approvals/EmployeeProof-docs-approve-reject`,{approver_user_id:u.current_user_id,record_id:f.record_id,status:n=="Approve"?"Approved":n=="Reject"?"Rejected":n,reviewer_comments:""}).then(l=>{console.log("testing data",l.data)}).finally(()=>{i.canShowLoadingScreen=!1,S(),i.getEmpDetails_list()})}return(l,e)=>{const E=C("Dialog"),J=C("InputText"),d=C("Column"),B=C("DataTable");return v(),j(I,null,[g(i).canShowLoadingScreen?(v(),P(H,{key:0,class:"absolute z-50 bg-white"})):F("",!0),o("div",W,[X,s(E,{header:"Confirmation",visible:b.value,"onUpdate:visible":e[2]||(e[2]=t=>b.value=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"580px"},modal:!0},{footer:a(()=>[o("div",ee,[o("button",{class:"bg-[#F9BE00] px-4 rounded-md text-[#000] h-[25px]",onClick:e[0]||(e[0]=t=>(T(),R(!0)))},"Yes"),o("button",{class:"bg-[#000] px-4 rounded-md text-[#fff] h-[25px]",onClick:e[1]||(e[1]=t=>R(!0))},"No")])]),default:a(()=>[o("div",Z,[_(" Documents Approvals "),o("span",null,"Are you sure you want to "+m(g(n))+" all the documents of this employee?",1)])]),_:1},8,["visible"]),s(E,{header:"Confirmation",visible:x.value,"onUpdate:visible":e[5]||(e[5]=t=>x.value=t),breakpoints:{"960px":"75vw","640px":"90vw"},style:{width:"350px"},modal:!0},{footer:a(()=>[o("div",le,[o("button",{class:"bg-[#F9BE00] px-4 rounded-md text-[#000] h-[25px]",onClick:e[3]||(e[3]=t=>(O(),D(!0)))},"Yes"),o("button",{class:"bg-[#000] px-4 rounded-md text-[#fff] h-[25px]",onClick:e[4]||(e[4]=t=>D(!0))},"No")])]),default:a(()=>[o("div",te,[oe,o("span",null,"Are you sure you want to "+m(g(n))+"?",1)])]),_:1},8,["visible"]),s(B,{value:g(i).array_EmpDetails_list,paginator:!0,rows:10,class:"",dataKey:"user_code",onRowExpand:l.onRowExpand,onRowCollapse:l.onRowCollapse,filters:y.value,"onUpdate:filters":e[8]||(e[8]=t=>y.value=t),selection:p.value,"onUpdate:selection":e[9]||(e[9]=t=>p.value=t),selectAll:l.selectAll,onSelectAllChange:l.onSelectAllChange,onRowSelect:l.onRowSelect,onRowUnselect:l.onRowUnselect,rowsPerPageOptions:[5,10,25],paginatorTemplate:"CurrentPageReport FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown",responsiveLayout:"scroll",currentPageReportTemplate:"Showing {first} to {last} of {totalRecords}",globalFilterFields:["name","user_code","doc_status"]},{header:a(()=>[o("div",ae,[o("div",se,[ne,s(J,{class:"border p-1.5 bg-gray-100 border-gray-300",modelValue:y.value.global.value,"onUpdate:modelValue":e[6]||(e[6]=t=>y.value.global.value=t),placeholder:"Global Search"},null,8,["modelValue"])])])]),empty:a(()=>[_(" No Employee Details documents for the selected status filter ")]),expansion:a(t=>[o("div",null,[s(B,{value:t.data.documents,responsiveLayout:"scroll",selection:p.value,"onUpdate:selection":e[7]||(e[7]=c=>p.value=c),selectAll:l.selectAll,onSelectAllChange:l.onSelectAllChange},{default:a(()=>[s(d,{field:"doc_name",header:"Document Name"},{default:a(()=>[_(m(t.data.doc_name),1)]),_:2},1024),s(d,{field:"doc_status",header:"Status"}),s(d,{field:"",header:"View"},{body:a(c=>[o("button",{class:"bg-[#F9BE00] px-4 rounded-md text-[#000] h-[25px]",onClick:$=>V(c.data.record_id)},"View",8,fe)]),_:2},1024),s(d,{field:"",header:"Action"},{body:a(c=>[o("span",ve,[o("button",{class:"bg-[#F9BE00] px-4 rounded-md text-[#000] h-[25px] flex justify-center items-center",onClick:$=>L(c.data,"Approve")},he,8,ge),o("button",{class:"bg-black px-4 rounded-md text-[#ffff] h-[25px] flex justify-center items-center",onClick:$=>L(c.data,"Reject")},we,8,be)])]),_:2},1024)]),_:2},1032,["value","selection","selectAll","onSelectAllChange"])])]),default:a(()=>[s(d,{expander:!0}),s(d,{selectionMode:"multiple",style:{width:"1rem"},exportable:!1}),s(d,{field:"name",header:"Employee Name",style:{width:"30rem"}},{body:a(t=>[o("div",ie,[JSON.parse(t.data.avatar).type=="shortname"?(v(),j("p",{key:0,class:Y(["p-2 font-semibold text-white rounded-full w-[30px] text-[14px]",g(u).getBackgroundColor(t.index)])},m(JSON.parse(t.data.avatar).data),3)):(v(),j("img",{key:1,class:"rounded-circle userActive-status profile-img",style:{height:"30px !important",width:"30px !important"},src:`data:image/png;base64,${JSON.parse(t.data.avatar).data}`,srcset:"",alt:""},null,8,re)),o("p",de,[_(m(t.data.name)+" ",1),o("span",ce,m(t.data.user_code),1)])])]),_:1}),s(d,{field:"doc_status",header:"Approval Status",sortable:!1},{body:a(({data:t})=>[_(m(t.doc_status),1)]),_:1}),s(d,{field:"",header:"Action"},{body:a(t=>[o("span",ue,[o("button",{class:"bg-[#F9BE00] px-4 rounded-md text-[#000] h-[25px]",onClick:c=>N(t.data.documents,"Approve")},"Approve All",8,pe),o("button",{class:"bg-black px-4 rounded-md text-[#ffff] h-[25px]",onClick:c=>N(t.data.documents,"Reject")},"Reject All",8,me)])]),_:1})]),_:1},8,["value","onRowExpand","onRowCollapse","filters","selection","selectAll","onSelectAllChange","onRowSelect","onRowUnselect"]),U.value==!1?(v(),P(E,{key:0,visible:w.value,"onUpdate:visible":e[11]||(e[11]=t=>w.value=t),class:"z-0 relative",modal:"",header:"Documents",style:{width:"40vw"}},{default:a(()=>[o("i",{onClick:e[10]||(e[10]=t=>w.value=!1),class:"pi pi-times border-[3px] p-2 rounded-full border-blue-200 absolute cursor-pointer top-2 right-2"}),o("img",{src:`data:image/png;base64,${A.value}`,alt:l.doc_url,class:"block pb-3 m-auto"},null,8,ye)]),_:1},8,["visible"])):F("",!0)])],64)}}};export{Re as default};
