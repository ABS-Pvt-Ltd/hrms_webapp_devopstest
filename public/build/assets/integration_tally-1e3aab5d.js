import{q as B,y as S,r as d,p as C,v as A,o as L,b as g,c as P,d as k,e as E,f as e,m as l,g as a,n as D,t as j,i as $,w as V,L as I,k as _,h as v,C as T}from"./app-e1ab7da0.js";import{S as N}from"./Service-a2d19084.js";import{u as F,c as K,r as G}from"./index.esm-8509f6bf.js";const q=B("useTallyService",()=>{S(),N();const f=d(!1),r=d({selected_legal_entity:null,generated_access_token:null,selected_cost_booking_nature:null,selected_cost_booking_bifurcation:null,selected_payroll_components:null,tally_json_mapping:null}),o=d([{acc_head:"Salaries",gl_head:"",gl_name:"",debit:"₹30,600",credit:"₹0.00"},{acc_head:"EPF Payables",gl_head:"",gl_name:"",debit:"₹30,600",credit:"₹0.00"},{acc_head:"ESIC Payables",gl_head:"",gl_name:"",debit:"₹30,600",credit:"₹0.00"},{acc_head:"LWF Payables",gl_head:"",gl_name:"",debit:"₹30,600",credit:"₹0.00"}]),y=()=>{let i={acc_head:"epf",gl_head:"",gl_name:"",debit:"₹30,600",credit:"₹0.00"};o.value.push(i)},b=i=>{console.log(i);let t=o.value.indexOf(i);console.log(t),o.value.splice(t,1)};d({}),d([]);const p=d(),x=d("tally_erp"),s=d();return{getLegalEntities:async()=>{let i=window.location.origin+"/api/clients/getAllClients";await C.get(i).then(t=>{s.value=t.data}).catch(t=>{console.error(t)})},getCostBookingNature:()=>{},getCostBookingBifurcation:async()=>{},getPayrollComponents:()=>{},generateAPIKey:()=>{console.log("Generating API token using the details "),f.value=!0;let i=window.location.origin+"/api/payroll/app-integrations/generateExternalApp_AccessToken";C.post(i,{client_code:r.value.selected_legal_entity,externalapp_internalname:x.value,validity:null}).then(t=>{r.value.generated_access_token=t.data.access_token,console.log("Tally token generated : "+t.data.access_token),f.value=!1}).catch(t=>{console.error(t)})},addTallyComponent:y,deleteTallyComponent:b,clients_list:s,vm_tally_integration:r,externalAppsList:p,tally_internal_name:x,json_tally_mapping_arr:o}}),U={class:"grid grid-cols-6"},M=T('<div class="col-span-6 gap-3 px-3 py-1 box-border"><div class="flex justify-between"><div class="col-span-6"><p class="font-semibold text-start text-[16px] font-[&#39;poppins&#39;]">Tally ERP</p><p class="font-normal text-[14px] font-[&#39;poppins&#39;]">This section provides you with the opportunity to assign the appropriate accounting codes, which are used for accounting and auditing purposes within your organization, to both recurring and adhoc components</p></div></div></div>',1),R={class:"col-span-6 flex flex-col px-3 py-2 box-border gap-3"},z={class:"flex flex-col gap-2 col-span-6"},H=e("p",{class:"font-medium text-start text-[14px] font-['poppins']"},[v("Legal Entity"),e("span",{class:"text-[#e71010]"},"*")],-1),W={key:0,class:"font-semibold text-red-400 fs-6"},O={class:"grid grid-cols-6"},J={class:"col-span-6 mb-2 gap-3 flex"},Q=e("i",{class:"pi pi-eye"},null,-1),X=[Q],Y={class:"mr-2 pi pi-clone text-[#CCCCCC]"},Z={class:"col-span-1"},ee=e("div",null,[e("p",null,[e("span",{class:"text-[#B20000] font-semibold text-[14px] font-['poppins']"},"Note :"),e("span",{class:"text-[#535353] font-normal text-[14px] font-['poppins']"}," Generate API Key above and fill in the Tally software to connect.")])],-1),te={class:"grid grid-cols-6 bg-[#ffff]"},oe={class:"col-span-4 flex p-2 box-border gap-2"},ne=e("div",{class:"col-span-2 flex justify-end p-2 box-border"},[e("button",{class:"bg-[#E6E6E6] text-[13px] rounded-lg gap-2 text-[#000] !w-[120px] h-[32px] p-2 box-border font-semibold flex justify-center items-center font-['poppins']"},[e("i",{class:"mr-2 pi pi-download"}),v("Download ")])],-1),le=["onClick"],ae=e("i",{class:"text-[#fff] flex justify-center items-center pi pi-minus"},null,-1),se=[ae],ie=e("i",{class:"mr-2 pi pi-plus"},null,-1),pe=T('<div class=""><p class="font-medium text-[14px] text-start text-[#B20000] font-[&#39;poppins&#39;]">Points to be Noted :</p><ul class="list-disc"><li class="font-medium text-[14px] text-[#000000] font-[&#39;poppins&#39;]">When connecting cost bookings from an ABShrms to Tally software, it&#39;s crucial to have a comprehensive comprehension of how data will be aligned between the systems. Clearly define the matching fields in both ABShrms and Tally, establishing a robust mapping procedure to guarantee accurate data transfer.</li><li class="font-medium text-[14px] text-[#000000] font-[&#39;poppins&#39;]">Engage your accounts team to assist in associating the appropriate ledger accounts with transaction types (credit or debit) to ensure precise financial mapping.</li></ul></div><div class="col-span-6 flex justify-center items-center gap-2"><button class="bg-[#ffff] border-[#e6e6e6] border-[1px] text-[13px] rounded-md gap-2 text-[#000] !w-[100px] h-[32px] p-2 box-border font-semibold flex justify-center items-center font-[&#39;poppins&#39;]">Back </button><button class="bg-[#0873CD] text-[13px] rounded-md gap-2 text-[#fff] !w-[100px] h-[32px] p-2 box-border font-semibold flex justify-center items-center font-[&#39;poppins&#39;]">Connect </button></div>',2),ue={__name:"integration_tally",setup(f){const r="Copy",o=q();function y(){let s=document.getElementById("apiKeyValue");s.type==="password"?s.type="text":s.type="password"}const b=A(()=>({selected_legal_entity:{required:K.withMessage("Legal Entity is Required",G)}})),p=F(b,o.vm_tally_integration);function x(){p.value.$validate(),p.value.$error?console.log("Failed Validation"):(console.log("Validation Successful"),p.value.$reset())}return L(async()=>{await o.getLegalEntities()}),(s,n)=>{const u=g("Dropdown"),c=g("Column"),h=g("InputText"),w=g("DataTable"),i=P("tooltip");return k(),E("div",U,[M,e("div",R,[e("div",z,[H,l(u,{modelValue:a(o).vm_tally_integration.selected_legal_entity,"onUpdate:modelValue":n[0]||(n[0]=t=>a(o).vm_tally_integration.selected_legal_entity=t),optionLabel:"client_fullname",optionValue:"client_code",options:a(o).clients_list,placeholder:"Select Legal Entity",class:D(["!w-[300px] md:w-[230px] h-10",[a(p).selected_legal_entity.$error?"p-invalid":""]])},null,8,["modelValue","options","class"]),a(p).selected_legal_entity.$error?(k(),E("span",W,j(a(p).selected_legal_entity.$errors[0].$message),1)):$("",!0)]),e("div",O,[e("div",J,[V(e("input",{type:"password",readonly:"",id:"apiKeyValue","onUpdate:modelValue":n[1]||(n[1]=t=>a(o).vm_tally_integration.generated_access_token=t),class:"bg-transparent border-none w-[320px] text-[#000] font-normal text-[12px] font-['poppins']"},null,512),[[I,a(o).vm_tally_integration.generated_access_token]]),e("button",{onClick:n[2]||(n[2]=t=>y())},X),e("button",null,[V(e("i",Y,null,512),[[i,r]])])]),e("div",Z,[e("button",{onClick:n[3]||(n[3]=t=>(x(),a(o).generateAPIKey())),class:"bg-[#0873CD] text-[15px] rounded-md text-[#fff] !w-[170px] h-[35px] font-semibold flex justify-center items-center font-['poppins']"},"Generate API Key")])]),ee,e("div",te,[e("div",oe,[l(u,{optionLabel:"value",optionValue:"value",placeholder:"Select Cost Boooking Nature",class:"bg-[#E6E6E6] text-[#000] text-normal text-[12px] !w-[240px] md:w-[230px] h-[36px] font-['poppins']"}),l(u,{optionLabel:"value",optionValue:"value",placeholder:"Select Cost Booking Bifurcation",class:"bg-[#E6E6E6] text-normal text-[12px] !w-[260px] md:w-[230px] h-[36px]"}),l(u,{optionLabel:"value",optionValue:"value",placeholder:"Select Components",class:"bg-[#E6E6E6] text-normal text-[12px] !w-[198px] md:w-[230px] h-[36px]"})]),ne]),l(w,{value:a(o).json_tally_mapping_arr,tableStyle:"min-width: 50rem"},{default:_(()=>[l(c,{field:"acc_head",header:"ABShrms Account Head",class:"font-['poppins'] text-[12px] font-medium"}),l(c,{field:"gl_head",header:"Tally GL Head",class:"font-['poppins'] text-[12px] font-medium"},{body:_(({data:t})=>[e("div",null,[l(h,{modelValue:s.value2,"onUpdate:modelValue":n[4]||(n[4]=m=>s.value2=m),type:"text",class:"bg-[#F6F6F6] border-[1px] w-[121px] h-[44px] rounded-[4px]"},null,8,["modelValue"])])]),_:1}),l(c,{field:"gl_name",header:"Tally GL Name",class:"font-['poppins'] text-[12px] font-medium"},{body:_(({data:t})=>[e("div",null,[l(h,{modelValue:s.value23,"onUpdate:modelValue":n[5]||(n[5]=m=>s.value23=m),type:"text",class:"bg-[#F6F6F6] border-[1px] w-[121px] h-[44px] rounded-[4px]"},null,8,["modelValue"])])]),_:1}),l(c,{field:"debit",header:"Debit",class:"font-['poppins'] text-[12px] font-medium"}),l(c,{field:"credit",header:"Credit",class:"font-['poppins'] text-[12px] font-medium"}),l(c,{field:"action",header:"Action",class:"font-['poppins'] text-[12px] font-medium"},{body:_(({data:t})=>[e("div",null,[e("button",{onClick:m=>a(o).deleteTallyComponent(t),class:"w-[20px] h-[20px] rounded-[20px] bg-[#D55151]"},se,8,le)])]),_:1})]),_:1},8,["value"]),e("div",null,[e("button",{onClick:n[6]||(n[6]=t=>a(o).addTallyComponent()),class:"bg-[#0873CD] text-[13px] rounded-md gap-2 text-[#fff] !w-[170px] h-[32px] p-2 box-border font-semibold flex justify-center items-center font-['poppins']"},[ie,v("Add Components ")])]),pe])])}}};export{ue as default};
