import"./autoprefixer-6643fbca.js";import{q as X,r as c,p as I,_ as B,o as E,d as l,e as n,f as t,F as N,l as F,i as w,n as T,g as e,t as o,C as Z,h as v,b as tt,m as p,k as st,u as et,a as ot}from"./app-e1ab7da0.js";import{d as y}from"./dayjs.min-ac6c82aa.js";import{S as J}from"./Service-a2d19084.js";import{u as V}from"./ManangePayslipsService-100ed7a7.js";const M=X("payrunMainStore",()=>{const f=c(0);J();const s=c(),r=c(),_=c(),i=c(),u=c(),a=c(),h=c(),S=c(),R=c(),O=c(),H=c(),A=c(),k=c(),D=c(),z=c(),L=c();let Y=y(new Date).format("YYYY-MM-DD");D.value=y(new Date).format("MMM YYYY"),k.value="("+y(Y).startOf("month").format("MMM D")+" - "+y(Y).endOf("month").format("MMM D")+","+y(Y).daysInMonth()+"Days)";const q=async()=>{let d="/fetch-leaverequests-based-on-currentrole";await I.get(d).then(m=>{s.value=m.data.data})};async function W(d){let m=window.location.origin+"/api/payroll/getOrgPayrollMonths";await I.post(m,{client_id:d}).then(b=>{A.value=b.data.data})}const j=c(),U=async(d,m)=>{D.value=G(d),k.value=K(d),console.log("client_id",m);let b="api/payroll/getPayrollOutcomes";await I.post(window.location.origin+"/"+b,{client_id:m,payroll_month:y(d).format("YYYY-MM-01")}).then(x=>{r.value=x.data.data,j.value=x.data.data.payroll_outcome,_.value=g(x.data.data.payroll_outcome.employee_payables),i.value=g(x.data.data.payroll_outcome.income_tax),u.value=g(x.data.data.payroll_outcome.EPF),a.value=g(x.data.data.payroll_outcome.ESIC),h.value=g(x.data.data.payroll_outcome.insurance),S.value=g(x.data.data.payroll_outcome.professional_tax),R.value=g(x.data.data.payroll_outcome.lwf),O.value=g(x.data.data.payroll_outcome.Other_deduction),H.value=x.data.data.payroll_stats,L.value=x.data.selected_start_end_date})},g=d=>Object.entries(d).map(b=>({title:b[0],value:b[1]})),G=d=>"("+y(d).startOf("month").format("MMM D")+" - "+y(d).endOf("month").format("MMM D")+","+y(d).daysInMonth()+"Days)",K=d=>y(d).format("MMM YYYY");function Q(d,m){if(d)return console.log(m),d.find(b=>b.title==m)}return{currentActiveScreen:f,leaveSource:s,getLeaveDetails:q,payrollSource:r,getPayrunOutcomeDetails:U,payrollOutcomeSource:j,employeePayables:_,employeeIncomeTax:i,employeeEpf:u,employeeEsic:a,employeeInsurance:h,professional_tax:S,lwf:R,Other_deduction:O,payroll_stats:H,getcurrentFiancialYearStatus:W,currentFiancialYearStatus:A,findSelectedHeader:Q,client_id:z,selected_start_end_date:L,selectedmonthstartenddate:D,selectedmonthdate:k}});const at={class:"border-2 border-gray-100 card"},lt={class:"flex items-center justify-center py-3 h-[70px] scroll-container"},nt={class:"scroll-content flex items-center justify-center",ref:"scrollContent"},ct={class:"flex items-center"},it={key:0,class:"border-[1.6px] border-dashed border-[#387C2D] w-[45px]"},dt={class:""},rt=["onClick"],_t={key:0,class:"pi pi-check text-[11px]"},pt={class:"font-bold text-center text-[9px] justify-center"},ut={__name:"currentFinancialYearStatus",setup(f){const s=M(),r=V(),_=c();return E(()=>{}),(i,u)=>(l(),n("div",at,[t("div",lt,[t("i",{class:"px-5 pi pi-angle-double-left text-[20px]",onClick:u[0]||(u[0]=(...a)=>i.scrollLeft&&i.scrollLeft(...a))}),t("div",nt,[(l(!0),n(N,null,F(e(s).currentFiancialYearStatus,(a,h)=>(l(),n("div",{class:"flex justify-center flex-col items-center",key:h},[t("div",ct,[h!=0?(l(),n("div",it)):w("",!0),t("div",dt,[t("div",{class:T(["w-[50px] h-[51px] cursor-pointer !rounded-full flex justify-center items-center flex-col",_.value&&_.value==a.month?"bg-blue-400 text-white  ":a.status==-1?"   bg-[#77AB6E] text-[#ffff] ":a.status==0?"!bg-[#fff] !text-[#C19F2E] border-[1px] !border-[#C19F2E]":"bg-gray-200  "]),onClick:S=>(e(s).getPayrunOutcomeDetails(a.month,e(s).client_id),e(r).selectedDate=a.month,_.value=a.month)},[a.status==-1?(l(),n("i",_t)):w("",!0),t("p",pt,o(e(y)(a.month).format("MMM-YYYY")),1)],10,rt)])])]))),128))],512),t("i",{class:"px-5 pi pi-angle-double-right text-[20px]",onClick:u[1]||(u[1]=(...a)=>i.scrollRight&&i.scrollRight(...a))})])]))}},ht=B(ut,[["__scopeId","data-v-29eec9d3"]]),mt={class:"w-full card font-['poppins']"},xt={class:"my-2 py-2 px-3"},yt={id:"topBar",class:"border-b-2 pb-3 flex justify-between"},ft=t("section",{class:"flex"},[t("strong",{class:"text-[14px] font-semibold"},"Run Payroll"),t("button",{class:"mx-3 bg-[#2E3F4A] py-1 px-3 rounded-sm text-white text-sm"}," COMPLETED "),t("div",{class:""})],-1),vt={class:"flex"},gt=t("i",{class:"pi pi-chevron-down",style:{"font-size":"1rem"}},null,-1),bt=[gt],$t={id:"Body",class:"my-2"},wt={key:0,class:"grid gap-2 md:grid-cols-2 sm:grid-cols-1 xxl:grid-cols-4 xl:grid-cols-2 lg:grid-cols-2 transition h-[190px] duration-150 ease-in-out",style:{display:"grid"}},St=t("img",{src:"",alt:"",class:"rounded-full h-8"},null,-1),Mt={class:""},Pt={class:"flex flex-col justify-start items-start w-[100%]"},Ct={class:"fs-7 text-[13px] font-medium text-start whitespace-nowrap"},Rt={class:"text-[10px] font-medium text-[#8B8B8B] text-start whitespace-nowrap"},Et=Z('<div class="text-end text-slate-400"><p>Last Preview Run on May 05 at 4:03pm</p></div><div id="footer" class="float-right py-2"><div class="text-end flex font-[&#39;poppins&#39;]"><button class="text-[#2E3F4A] border-[2px] rounded-md border-[#2E3F4A] px-3 py-2">Preview Run Payroll</button><button class="text-[#2E3F4A] border-[2px] rounded-md border-[#2E3F4A] px-3 py-2 mx-2">Review All Employees</button><button class="bg-[#2E3F4A] px-4 rounded-md text-white">Finalize Payroll</button></div></div>',2),kt={__name:"runPayroll",setup(f){const s=c(!0),r=M();E(()=>{r.getLeaveDetails()});const _=c([{id:1,shorName:"leave",icons:"pi pi-calendar",name:"Leave, Attendance & Daily Wages",title:"Last Changes on Jun 09,2023,(7:56pm)"},{shorName:"attendance",icons:"pi pi-user-plus",name:"New Joinee & Exits  ",title:"Last Changes on Jun 09,2023,(7:56pm) "},{shorName:"Salary-Revisions",icons:"pi pi-shopping-bag",name:"Bonus, Salary Revisions & Overtime",title:"Last Changes on Jun 09,2023,(7:56pm) "},{shorName:"Reimbursement",icons:"pi pi-calendar-times",name:"Reimbursement, Adhoc Payment, Deduction",title:"Last Changes on Jun 09,2023,(7:56pm) "},{shorName:"Salaries-Hold",icons:"pi pi-hourglass",name:"Salaries on Hold & Arrears",title:"Last Changes on Jun 09,2023,(7:56pm) "},{shorName:"Override",icons:"pi pi-user",name:"Override (PT, ESI, TDS, LWF)",title:"Last Changes on Jun 09,2023,(7:56pm) "}]);return(i,u)=>(l(),n("div",mt,[t("div",xt,[t("section",yt,[ft,t("section",vt,[t("button",{onClick:u[0]||(u[0]=a=>s.value=!s.value)},bt)])]),t("div",$t,[s.value?(l(),n("div",wt,[(l(!0),n(N,null,F(_.value,(a,h)=>(l(),n("div",{class:"p-3 my-1 rounded-lg dynamic-card-without-border flex transition ease-in-out delay-80 hover:-translate-y-1 hover:scale-100 duration-300",key:h},[St,t("div",Mt,[t("i",{class:T([[a.icons],"text-2xl w-9"])},null,2)]),t("div",Pt,[t("h1",Ct,o(a.name),1),t("h1",Rt,o(a.title),1)])]))),128))])):w("",!0)]),Et])]))}},P="/build/assets/down_arrow-420962e3.png",C="/build/assets/Arrow-3f1b51d6.png",Dt={key:0,class:"bg-white rounded-lg h-[80%] font-['poppins']"},Yt={class:"w-full h-[50px] bg-gray-200 p-2 grid grid-cols-3 gap-4 rounded-md"},It={class:"ml-2"},Nt=t("p",{class:"text-[#888888] font-semibold text-[11px] whitespace-nowrap"},"Total Employees",-1),Ft={class:"font-semibold pr-[6px] fs-6"},Ot=t("img",{src:P,alt:"",class:"w-[12px] h-[10px]"},null,-1),Ht={class:"font-semibold pl-[6px] pr-[6px] fs-6"},At=t("img",{src:C,class:"w-[10px] h-[10px] ml-1",alt:""},null,-1),Lt={class:"font-semibold fs-6 pl-[6px]"},jt={class:"ml-5"},Bt=t("p",{class:"text-[#888888] font-semibold text-[11px] whitespace-nowrap"},"Calendar Days",-1),Tt={class:"font-semibold fs-6"},Jt={class:"ml-5"},Vt=t("p",{class:"text-[#888888] font-semibold text-[11px] whitespace-nowrap"},"Payroll Processed",-1),zt={class:"font-semibold fs-6"},qt={class:"px-3 h-12"},Wt={class:"my-1"},Ut={class:"grid grid-cols-12"},Gt={class:"col-span-6"},Kt=t("p",{class:"text-gray-500 font-semibold text-[12px]"},"Total Payroll Cost",-1),Qt={key:0,class:"font-semibold text-xs"},Xt={class:"font-semibold text-xs text-red-400"},Zt=t("img",{src:P,alt:"",class:"w-[10px] h-[8px]"},null,-1),ts={key:1,class:"font-semibold text-xs"},ss={class:"font-semibold text-xs text-green-400"},es=t("img",{src:C,class:"w-[10px] h-[10px] ml-1",alt:""},null,-1),os=t("div",{class:"col-span-2"}," = ",-1),as={class:"col-span-4"},ls={class:"font-semibold fs-6 text-right"},ns={class:"px-3 h-12 text-[15px]"},cs={class:"my-2"},is={class:"grid grid-cols-12"},ds={class:"col-span-6"},rs=t("p",{class:"text-gray-500 font-semibold text-[12px]"},"Employee Deposit",-1),_s={key:0,class:"font-semibold text-xs"},ps={class:"font-semibold text-xs text-red-400"},us=t("img",{src:P,alt:"",class:"w-[10px] h-[8px]"},null,-1),hs={key:1,class:"font-semibold text-xs"},ms={class:"font-semibold text-xs text-green-400"},xs=t("img",{src:C,class:"w-[10px] h-[10px] ml-1",alt:""},null,-1),ys=t("div",{class:"col-span-2"}," = ",-1),fs={class:"col-span-4"},vs={class:"font-semibold fs-6 text-right"},gs={class:"px-3 h-12"},bs={class:"my-2"},$s={class:"grid grid-cols-12"},ws={class:"col-span-6"},Ss=t("p",{class:"text-gray-500 font-semibold text-[12px]"},"Total Deductions",-1),Ms={key:0,class:"font-semibold text-xs"},Ps={class:"font-semibold text-xs text-red-400"},Cs=t("img",{src:P,alt:"",class:"w-[10px] h-[8px]"},null,-1),Rs={key:1,class:"font-semibold text-xs"},Es={class:"font-semibold text-xs text-green-400"},ks=t("img",{src:C,class:"w-[10px] h-[10px] ml-1",alt:""},null,-1),Ds=t("div",{class:"col-span-2"}," = ",-1),Ys={class:"col-span-4"},Is={class:"font-semibold fs-6 text-right"},Ns={class:"px-3 h-12"},Fs={class:"my-2"},Os={class:"grid grid-cols-12"},Hs={class:"col-span-6"},As=t("p",{class:"text-gray-500 font-semibold text-[12px]"},"Total Contributions ",-1),Ls={key:0,class:"font-semibold text-xs"},js={class:"font-semibold text-xs text-red-400"},Bs=t("img",{src:P,alt:"",class:"w-[10px] h-[8px]"},null,-1),Ts={key:1,class:"font-semibold text-xs"},Js={class:"font-semibold text-xs text-green-400"},Vs=t("img",{src:C,class:"w-[10px] h-[10px] ml-1",alt:""},null,-1),zs=t("div",{class:"col-span-2"}," = ",-1),qs={class:"col-span-4"},Ws={class:"font-semibold fs-6 text-right"},Us={__name:"calculatedPayrollPerMonth",setup(f){const s=M();return(r,_)=>e(s).payroll_stats?(l(),n("div",Dt,[t("div",Yt,[t("div",It,[Nt,t("p",Ft,[v(o(e(s).payroll_stats.total_employees)+" ",1),Ot,t("span",Ht,o(e(s).payroll_stats.exit_employees),1),At,t("span",Lt,o(e(s).payroll_stats.new_employees),1)])]),t("div",jt,[Bt,t("p",Tt,o(e(s).payroll_stats.calendar_days),1)]),t("div",Jt,[Vt,t("p",zt,o(e(s).payroll_stats.payroll_processed),1)])]),t("div",qt,[t("div",Wt,[t("div",Ut,[t("div",Gt,[Kt,String(e(s).payroll_stats.pre_month_cost).includes("-")?(l(),n("p",Qt,[v(o(e(s).payroll_stats.previous_month)+" ",1),t("span",Xt,"INR "+o(e(s).payroll_stats.pre_month_cost),1),Zt])):(l(),n("p",ts,[v(o(e(s).payroll_stats.previous_month)+" ",1),t("span",ss,"INR "+o(e(s).payroll_stats.pre_month_cost),1),es]))]),os,t("div",as,[t("p",ls,"INR "+o(e(s).payroll_stats.total_payroll_cost),1)])])])]),t("div",ns,[t("div",cs,[t("div",is,[t("div",ds,[rs,String(e(s).payroll_stats.pre_month_deposit).includes("-")?(l(),n("p",_s,[v(o(e(s).payroll_stats.previous_month)+" ",1),t("span",ps,"INR "+o(e(s).payroll_stats.pre_month_deposit),1),us])):(l(),n("p",hs,[v(o(e(s).payroll_stats.previous_month)+" ",1),t("span",ms,"INR "+o(e(s).payroll_stats.pre_month_deposit),1),xs]))]),ys,t("div",fs,[t("p",vs," INR "+o(e(s).payroll_stats.employee_deposit),1)])])])]),t("div",gs,[t("div",bs,[t("div",$s,[t("div",ws,[Ss,String(e(s).payroll_stats.pre_month_deduction).includes("-")?(l(),n("p",Ms,[v(o(e(s).payroll_stats.previous_month)+" ",1),t("span",Ps,"INR "+o(e(s).payroll_stats.pre_month_deduction),1),Cs])):(l(),n("p",Rs,[v(o(e(s).payroll_stats.previous_month)+" ",1),t("span",Es,"INR "+o(e(s).payroll_stats.pre_month_deduction),1),ks]))]),Ds,t("div",Ys,[t("p",Is," INR "+o(e(s).payroll_stats.total_deductions),1)])])])]),t("div",Ns,[t("div",Fs,[t("div",Os,[t("div",Hs,[As,String(e(s).payroll_stats.pre_month_contribution).includes("-")?(l(),n("p",Ls,[v(o(e(s).payroll_stats.previous_month)+" ",1),t("span",js,"INR "+o(e(s).payroll_stats.pre_month_contribution),1),Bs])):(l(),n("p",Ts,[v(o(e(s).payroll_stats.previous_month)+" ",1),t("span",Js,"INR "+o(e(s).payroll_stats.pre_month_contribution),1),Vs]))]),zs,t("div",qs,[t("p",Ws,"INR "+o(e(s).payroll_stats.total_contributions),1)])])])])])):w("",!0)}},Gs={key:0,class:"grid grid-cols-6 gap-4 text-sm"},Ks={class:"font-medium text-gray-500 text-[12px]"},Qs={class:"font-semibold text-[12px]"},$={__name:"payoutCard",props:{source:{type:Object,required:!0}},setup(f){function s(r){if(r)return r.split("_").map(i=>i.charAt(0).toUpperCase()+i.slice(1)).join(" ")}return(r,_)=>f.source?(l(),n("div",Gs,[(l(!0),n(N,null,F(f.source.filter(i=>i.title!=="header"),i=>(l(),n("div",null,[t("p",Ks,o(s(i.title)),1),t("p",Qs,o(i.value),1)]))),256))])):w("",!0)}},Xs={class:"card font-['poppins']"},Zs={class:"card-body"},te={class:"flex justify-between p-1"},se=t("div",{class:""},[t("p",{class:"font-bold text-lg"},"Payroll Summary")],-1),ee={class:"gap-4 text-sm flex items-center"},oe=t("p",{class:"whitespace-nowrap text-[#2E3F4A]"},"View Pay Register",-1),ae=t("p",null,null,-1),le={class:"flex"},ne=t("i",{class:"pi pi-chevron-down",style:{"font-size":"1rem"}},null,-1),ce=[ne],ie={key:0},de={class:"border w- p-2"},re={class:"font-semibold text-[14px]"},_e={class:"my-2"},pe={class:"border w- p-2"},ue={class:"font-semibold text-[14px]"},he={class:"my-2"},me={class:"border w- p-2"},xe={class:"font-semibold text-[14px]"},ye={class:"my-2"},fe={class:"border w- p-2"},ve={class:"font-semibold text-[14px]"},ge={class:"my-2"},be={class:"border w- p-2"},$e={class:"font-semibold text-[14px]"},we={class:"my-2"},Se={class:"border w- p-2"},Me={class:"font-semibold text-[14px]"},Pe={class:"my-2"},Ce={class:"border w- p-2"},Re={class:"font-semibold text-[14px]"},Ee={class:"my-2"},ke={class:"border w- p-2"},De={class:"font-semibold text-[14px]"},Ye={class:"my-2"},Ie={__name:"payrollOutcome",setup(f){const s=M(),r=J(),_=V(),i=c(!0);E(async()=>{r.current_session_client_id().then(a=>{s.client_id=a.data,console.log(a.data,"current_user_client_id sd"),s.getPayrunOutcomeDetails(u,a.data),s.getcurrentFiancialYearStatus(a.data)})});const u=new Date;return(a,h)=>{const S=tt("RouterLink");return l(),n("div",Xs,[t("div",Zs,[t("div",te,[se,t("div",ee,[oe,p(S,{to:"/Payroll/Manage-Payslips",class:"px-2 py-1"},{default:st(()=>[t("p",{class:"whitespace-nowrap text-blue-500 underline underline-offset-1",onClick:h[0]||(h[0]=R=>e(_).enable_select_calendar=1)},"Manage PaySlip")]),_:1}),ae,t("section",le,[t("button",{onClick:h[1]||(h[1]=R=>i.value=!i.value)},ce)])])]),i.value?(l(),n("div",ie,[t("div",de,[t("p",re,o(e(s).findSelectedHeader(e(s).employeePayables,"header")?e(s).findSelectedHeader(e(s).employeePayables,"header").value:""),1),t("div",_e,[p($,{source:e(s).employeePayables},null,8,["source"])])]),t("div",pe,[t("p",ue,o(e(s).findSelectedHeader(e(s).employeeIncomeTax,"header")?e(s).findSelectedHeader(e(s).employeeIncomeTax,"header").value:""),1),t("div",he,[p($,{source:e(s).employeeIncomeTax},null,8,["source"])])]),t("div",me,[t("p",xe,o(e(s).findSelectedHeader(e(s).employeeEpf,"header")?e(s).findSelectedHeader(e(s).employeeEpf,"header").value:""),1),t("div",ye,[p($,{source:e(s).employeeEpf},null,8,["source"])])]),t("div",fe,[t("p",ve,o(e(s).findSelectedHeader(e(s).employeeEsic,"header")?e(s).findSelectedHeader(e(s).employeeEsic,"header").value:""),1),t("div",ge,[p($,{source:e(s).employeeEsic},null,8,["source"])])]),t("div",be,[t("p",$e,o(e(s).findSelectedHeader(e(s).employeeInsurance,"header")?e(s).findSelectedHeader(e(s).employeeInsurance,"header").value:""),1),t("div",we,[p($,{source:e(s).employeeInsurance},null,8,["source"])])]),t("div",Se,[t("p",Me,o(e(s).findSelectedHeader(e(s).professional_tax,"header")?e(s).findSelectedHeader(e(s).professional_tax,"header").value:""),1),t("div",Pe,[p($,{source:e(s).professional_tax},null,8,["source"])])]),t("div",Ce,[t("p",Re,o(e(s).findSelectedHeader(e(s).lwf,"header")?e(s).findSelectedHeader(e(s).lwf,"header").value:""),1),t("div",Ee,[p($,{source:e(s).lwf},null,8,["source"])])]),t("div",ke,[t("p",De,o(e(s).findSelectedHeader(e(s).Other_deduction,"header")?e(s).findSelectedHeader(e(s).Other_deduction,"header").value:""),1),t("div",Ye,[p($,{source:e(s).Other_deduction},null,8,["source"])])])])):w("",!0)])])}}},Ne={},Fe={class:"card font-['poppins']"},Oe=t("div",{class:"card-body"}," Activity ",-1),He=[Oe];function Ae(f,s){return l(),n("div",Fe,He)}const Le=B(Ne,[["render",Ae]]);const je={class:"w-full ]"},Be={class:""},Te={class:"my-2"},Je={class:"font-['poppins'] fs-6"},Ve={class:"text-[#8B8B8B]"},ze={class:"grid grid-cols-3"},qe={class:"col-span-2 pr-3 ..."},We={class:"my-2"},Ue={class:"grid col-span-1 h-[10%] gap-4"},Ge={class:"..."},Ke={class:"... my-2"},eo={__name:"payRun",setup(f){et(),ot();const s=M();return E(()=>{s.getLeaveDetails()}),(r,_)=>(l(),n("div",je,[t("div",Be,[p(ht)]),t("div",Te,[t("p",Je,[v(o(e(s).selectedmonthdate)+" ",1),t("span",Ve,o(e(s).selectedmonthstartenddate),1)])]),t("div",ze,[t("div",qe,[p(kt),t("div",We,[p(Ie)])]),t("div",Ue,[t("div",Ge,[p(Us),t("div",Ke,[p(Le)])])])])]))}};export{eo as default};
